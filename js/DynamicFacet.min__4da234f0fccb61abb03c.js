webpackJsonpCoveo__temporary([2,17,84],{111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i=n(87),s=n(1),r=n(0),a=n(9),l=function(){function e(){}return e.hideIfInfiniteScrollEnabled=function(t){e.isInfiniteScrollEnabled(t.searchInterface.element)?(t.disable(),s.$$(t.element).hide(),e.warnIfComponentNotNeeded(t)):(t.enable(),s.$$(t.element).unhide())},e.isInfiniteScrollEnabled=function(t){var n=e.getActiveResultList(t);return!!n&&!!n.options.enableInfiniteScroll},e.scrollToTop=function(t){var n=e.getActiveResultList(t);if(!n)return new a.Logger(this).warn("No active ResultList, scrolling to the top of the Window"),window.scrollTo(0,0);var o=n.searchInterface.element.getBoundingClientRect().top;if(!(o>0)){var i=n.options.infiniteScrollContainer;"function"==typeof i.scrollTo?i.scrollTo(0,window.pageYOffset+o):i.scrollTop=0}},e.getActiveResultList=function(t){var n=e.getResultLists(t);return r.find(n,function(e){return!e.disabled})},e.getResultLists=function(t){return s.$$(t).findAll("."+e.cssClass()).map(function(e){return o.Component.get(e,i.ResultList)})},e.cssClass=function(){return o.Component.computeCssClassName(i.ResultList)},e.warnIfComponentNotNeeded=function(t){var n=t.searchInterface.root;e.allResultListsUseInfiniteScroll(n)&&e.notNeededComponentWarning(t)},e.allResultListsUseInfiniteScroll=function(t){return 0===e.getResultLists(t).filter(function(e){return!e.options.enableInfiniteScroll}).length},e.notNeededComponentWarning=function(t){var n=o.Component.computeCssClassNameForType(t.type),i="The "+n+" component is not needed because all "+e.cssClass()+" components have enableInfiniteScroll set to 'true'.\n    For the best performance, remove the "+n+" component from your search page.";new a.Logger(t).warn(i)},e}();t.ResultListUtils=l},125:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(88),i=function(){function e(){}return e.shouldDrawFacetSlider=function(e,t){return o.ResponsiveDropdownContent.isTargetInsideOpenedDropdown(t)||!this.isSmallFacetActivated(e)},e.isSmallTabsActivated=function(e){return e.hasClass(this.smallTabsClassName)},e.isSmallFacetActivated=function(e){return e.hasClass(this.smallFacetClassName)},e.isSmallRecommendationActivated=function(e){return e.hasClass(this.smallRecommendationClassName)},e.activateSmallTabs=function(e){e.addClass(this.smallTabsClassName)},e.deactivateSmallTabs=function(e){e.removeClass(this.smallTabsClassName)},e.activateSmallFacet=function(e){e.addClass(this.smallFacetClassName)},e.deactivateSmallFacet=function(e){e.removeClass(this.smallFacetClassName)},e.activateSmallRecommendation=function(e){e.addClass(this.smallRecommendationClassName)},e.deactivateSmallRecommendation=function(e){e.removeClass(this.smallRecommendationClassName)},e.smallTabsClassName="coveo-small-tabs",e.smallFacetClassName="coveo-small-facets",e.smallRecommendationClassName="coveo-small-recommendation",e}();t.ResponsiveComponentsUtils=i},136:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},s=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,a)}l((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0}),n(219);var a=n(0),l=n(1),u=n(3),c=n(7),p=n(8),h=n(2),d=n(82),f=n(574),m=n(575),y=n(505),g=n(510),b=n(11),v=n(13),C=n(511),O=n(4),F=n(18),S=n(5),R=n(506),A=n(6),w=n(24),T=n(34),V=n(10),E=n(577),D=n(111),I=n(178),$=n(171),x=n(580),_=n(9),M=n(39),L=function(e){function t(n,o,i,s){void 0===s&&(s=t.ID);var r=e.call(this,n,s,i)||this;return r.element=n,r.listenToQueryStateChange=!0,r.moreValuesAvailable=!1,r.isDynamicFacet=!0,r.isFieldValueCompatible=!0,r.handleQueryStateChangedIncluded=function(e){var t=r.values.selectedValues,n=e.filter(function(e){return r.values.get(e)}),o=a.difference(n,t),i=a.difference(t,n);O.Utils.isNonEmptyArray(o)&&r.selectMultipleValues(o),O.Utils.isNonEmptyArray(i)&&r.deselectMultipleValues(i)},r.options=p.ComponentOptions.initComponentOptions(n,t,o),r.initDynamicFacetQueryController(),r.initDependsOnManager(),r.initQueryEvents(),r.initQueryStateEvents(),r.initBreadCrumbEvents(),r.initComponentStateEvents(),r.initValues(),r.verifyCollapsingConfiguration(),r.isCollapsed=r.options.enableCollapse&&r.options.collapsedByDefault,f.ResponsiveDynamicFacets.init(r.root,r,r.options),r}return o(t,e),Object.defineProperty(t.prototype,"fieldName",{get:function(){return this.options.field.slice(1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"facetType",{get:function(){return I.FacetType.specific},enumerable:!0,configurable:!0}),t.prototype.selectValue=function(e){S.Assert.exists(e),this.selectMultipleValues([e])},t.prototype.selectMultipleValues=function(e){var t=this;S.Assert.exists(e),this.ensureDom(),this.logger.info("Selecting facet value(s)",e),e.forEach(function(e){t.values.get(e).select()}),this.updateQueryStateModel()},t.prototype.deselectValue=function(e){S.Assert.exists(e),this.deselectMultipleValues([e])},t.prototype.hasSelectedValue=function(e){return this.values.hasSelectedValue(e)},t.prototype.deselectMultipleValues=function(e){var t=this;S.Assert.exists(e),this.ensureDom(),this.logger.info("Deselecting facet value(s)",e),e.forEach(function(e){t.values.get(e).deselect()}),this.updateQueryStateModel()},t.prototype.toggleSelectValue=function(e){S.Assert.exists(e),this.ensureDom();var t=this.values.get(e);t.toggleSelect(),this.logger.info("Toggle select facet value",t),this.updateQueryStateModel()},t.prototype.getCaptionForStringValue=function(e){return M.FacetUtils.getDisplayValueFromValueCaption(e,this.options.field,this.options.valueCaption)},t.prototype.showMoreValues=function(e){var t=this;void 0===e&&(e=this.options.numberOfValues),this.ensureDom(),this.logger.info("Show more values"),this.dynamicFacetQueryController.increaseNumberOfValuesToRequest(e),this.triggerNewIsolatedQuery(function(){return t.logAnalyticsFacetShowMoreLess(V.analyticsActionCauseList.dynamicFacetShowMore)})},t.prototype.showLessValues=function(){var e=this;this.ensureDom(),this.logger.info("Show less values"),this.dynamicFacetQueryController.resetNumberOfValuesToRequest(),this.triggerNewIsolatedQuery(function(){return e.logAnalyticsFacetShowMoreLess(V.analyticsActionCauseList.dynamicFacetShowLess)})},t.prototype.reset=function(){this.ensureDom(),this.values.hasActiveValues&&(this.logger.info("Deselect all values"),this.values.clearAll(),this.values.render()),this.enablePreventAutoSelectionFlag(),this.updateAppearance(),this.updateQueryStateModel()},t.prototype.toggleCollapse=function(){this.isCollapsed?this.expand():this.collapse()},t.prototype.expand=function(){if(!this.options.enableCollapse)return this.logger.warn('Calling expand() won\'t do anything on a facet that has the option "enableCollapse" set to "false"');this.isCollapsed&&(this.ensureDom(),this.logger.info("Expand facet values"),this.isCollapsed=!1,this.updateAppearance())},t.prototype.collapse=function(){if(!this.options.enableCollapse)return this.logger.warn('Calling collapse() won\'t do anything on a facet that has the option "enableCollapse" set to "false"');this.isCollapsed||(this.ensureDom(),this.logger.info("Collapse facet values"),this.isCollapsed=!0,this.updateAppearance())},t.prototype.enableFreezeCurrentValuesFlag=function(){this.dynamicFacetQueryController.enableFreezeCurrentValuesFlag()},t.prototype.enableFreezeFacetOrderFlag=function(){this.dynamicFacetQueryController.enableFreezeFacetOrderFlag()},t.prototype.enablePreventAutoSelectionFlag=function(){this.dynamicFacetQueryController.enablePreventAutoSelectionFlag()},t.prototype.scrollToTop=function(){this.options.enableScrollToTop&&D.ResultListUtils.scrollToTop(this.root)},Object.defineProperty(t.prototype,"analyticsFacetState",{get:function(){return this.values.activeValues.map(function(e){return e.analyticsFacetState})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"basicAnalyticsFacetState",{get:function(){return{field:this.options.field.toString(),id:this.options.id,title:this.options.title,facetType:this.facetType,facetPosition:this.position}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"basicAnalyticsFacetMeta",{get:function(){return{facetField:this.options.field.toString(),facetId:this.options.id,facetTitle:this.options.title}},enumerable:!0,configurable:!0}),t.prototype.logAnalyticsEvent=function(e,t){this.usageAnalytics.logSearchEvent(e,t)},t.prototype.putStateIntoQueryBuilder=function(e){S.Assert.exists(e),this.dynamicFacetQueryController.putFacetIntoQueryBuilder(e)},t.prototype.putStateIntoAnalytics=function(){var e=this.usageAnalytics.getPendingSearchEvent();e&&e.addFacetState(this.analyticsFacetState)},t.prototype.isCurrentlyDisplayed=function(){return l.$$(this.element).isVisible()},Object.defineProperty(t.prototype,"hasActiveValues",{get:function(){return this.values.hasActiveValues},enumerable:!0,configurable:!0}),t.prototype.initQueryEvents=function(){var e=this;this.bind.onRootElement(b.QueryEvents.duringQuery,function(){return e.ensureDom()}),this.bind.onRootElement(b.QueryEvents.doneBuildingQuery,function(t){return e.handleDoneBuildingQuery(t)}),this.bind.onRootElement(b.QueryEvents.deferredQuerySuccess,function(t){return e.handleQuerySuccess(t.results)}),this.bind.onRootElement(b.QueryEvents.queryError,function(){return e.onNoValues()})},t.prototype.initQueryStateEvents=function(){this.includedAttributeId=v.QueryStateModel.getFacetId(this.options.id),this.queryStateModel.registerNewAttribute(this.includedAttributeId,[]),this.bind.onQueryState(F.MODEL_EVENTS.CHANGE,void 0,this.handleQueryStateChanged)},t.prototype.initBreadCrumbEvents=function(){var e=this;this.options.includeInBreadcrumb&&(this.bind.onRootElement(T.BreadcrumbEvents.populateBreadcrumb,function(t){return e.handlePopulateBreadcrumb(t)}),this.bind.onRootElement(T.BreadcrumbEvents.clearBreadcrumb,function(){return e.reset()}))},t.prototype.initValues=function(){this.values=new g.DynamicFacetValues(this,x.DynamicFacetValueCreator)},t.prototype.initComponentStateEvents=function(){var e=v.QueryStateModel.getFacetId(this.options.id);this.componentStateModel.registerComponent(e,this)},t.prototype.initDynamicFacetQueryController=function(){this.dynamicFacetQueryController=new C.DynamicFacetQueryController(this)},t.prototype.handleDoneBuildingQuery=function(e){this.dynamicFacetManager||(S.Assert.exists(e),S.Assert.exists(e.queryBuilder),this.putStateIntoQueryBuilder(e.queryBuilder),this.putStateIntoAnalytics())},t.prototype.handleQuerySuccess=function(e){if(!this.dynamicFacetManager)return O.Utils.isNullOrUndefined(e.facets)?this.notImplementedError():void this.handleQueryResults(e)},t.prototype.handleQueryResults=function(e){var t=a.findIndex(e.facets,{facetId:this.options.id}),n=-1!==t?e.facets[t]:null;this.position=n?t+1:void 0,n?this.onNewValues(n):this.onNoValues(),this.header.hideLoading(),this.updateQueryStateModel(),this.values.render(),this.updateAppearance()},t.prototype.onNewValues=function(e){this.moreValuesAvailable=e.moreValuesAvailable,this.values.createFromResponse(e)},t.prototype.onNoValues=function(){this.moreValuesAvailable=!1,this.values.resetValues()},t.prototype.handleQueryStateChanged=function(e){if(this.listenToQueryStateChange){var t=e.attributes[this.includedAttributeId];t&&this.handleQueryStateChangedIncluded(t)}},t.prototype.handlePopulateBreadcrumb=function(e){if(S.Assert.exists(e),this.values.hasActiveValues){var t=new m.DynamicFacetBreadcrumbs(this);e.breadcrumbs.push({element:t.element})}},t.prototype.initDependsOnManager=function(){var e=this,t={reset:function(){return e.reset()},ref:this};this.dependsOnManager=new $.DependsOnManager(t)},t.prototype.createDom=function(){this.createAndAppendContent(),this.updateAppearance()},t.prototype.createAndAppendContent=function(){this.createAndAppendHeader(),this.createAndAppendSearch(),this.createAndAppendValues()},t.prototype.createAndAppendHeader=function(){var e=this;this.header=new y.DynamicFacetHeader({title:this.options.title,enableCollapse:this.options.enableCollapse,clear:function(){return e.clear()},toggleCollapse:function(){return e.toggleCollapse()},collapse:function(){return e.collapse()},expand:function(){return e.expand()}}),this.element.appendChild(this.header.element)},t.prototype.createAndAppendSearch=function(){!1!==this.options.enableFacetSearch&&(this.search=new E.DynamicFacetSearch(this),this.element.appendChild(this.search.element))},t.prototype.createAndAppendValues=function(){this.element.appendChild(this.values.render())},t.prototype.updateQueryStateModel=function(){this.listenToQueryStateChange=!1,this.queryStateModel.set(this.includedAttributeId,this.values.selectedValues),this.listenToQueryStateChange=!0},t.prototype.updateAppearance=function(){this.header.toggleClear(this.values.hasSelectedValues),this.header.toggleCollapse(this.isCollapsed),this.toggleSearchDisplay(),l.$$(this.element).toggleClass("coveo-dynamic-facet-collapsed",this.isCollapsed),l.$$(this.element).toggleClass("coveo-active",this.values.hasSelectedValues),l.$$(this.element).toggleClass("coveo-hidden",!this.values.hasDisplayedValues)},t.prototype.toggleSearchDisplay=function(){if(!1!==this.options.enableFacetSearch)return this.isCollapsed?l.$$(this.search.element).toggleClass("coveo-hidden",!0):void l.$$(this.search.element).toggleClass("coveo-hidden",!this.options.enableFacetSearch&&!this.moreValuesAvailable)},t.prototype.triggerNewQuery=function(e){this.beforeSendingQuery();var t=e?{beforeExecuteQuery:e}:{ignoreWarningSearchEvent:!0};this.queryController.executeQuery(t)},t.prototype.triggerNewIsolatedQuery=function(e){return s(this,void 0,void 0,function(){var t,n;return r(this,function(o){switch(o.label){case 0:this.beforeSendingQuery(),e&&e(),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.dynamicFacetQueryController.getQueryResults()];case 2:return t=o.sent(),this.handleQueryResults(t),[3,4];case 3:return n=o.sent(),this.header.hideLoading(),[3,4];case 4:return[2]}})})},t.prototype.beforeSendingQuery=function(){this.header.showLoading()},t.prototype.notImplementedError=function(){this.logger.error("DynamicFacets are not supported by your current search endpoint. Disabling this component."),this.disable(),this.updateAppearance()},t.prototype.verifyCollapsingConfiguration=function(){this.options.collapsedByDefault&&!this.options.enableCollapse&&this.logger.warn('The "collapsedByDefault" option is "true" while the "enableCollapse" is "false"')},t.prototype.logAnalyticsFacetShowMoreLess=function(e){this.usageAnalytics.logCustomEvent(e,this.basicAnalyticsFacetMeta,this.element)},t.prototype.clear=function(){var e=this;this.reset(),this.enableFreezeFacetOrderFlag(),this.scrollToTop(),this.triggerNewQuery(function(){return e.logClearAllToAnalytics()})},t.prototype.logClearAllToAnalytics=function(){this.logAnalyticsEvent(V.analyticsActionCauseList.dynamicFacetClearAll,this.basicAnalyticsFacetMeta)},t.ID="DynamicFacet",t.doExport=function(){return u.exportGlobally({DynamicFacet:t})},t.options=i({},d.ResponsiveFacetOptions,{id:p.ComponentOptions.buildStringOption({postProcessing:function(e,t){void 0===e&&(e="");var n=e.replace(/[^A-Za-z0-9-_@]+/g,"");return O.Utils.isNonEmptyString(n)?n.slice(0,59):t.field.slice(0,59)},section:"CommonOptions"}),title:p.ComponentOptions.buildLocalizedStringOption({localizedString:function(){return A.l("NoTitle")},section:"CommonOptions",priority:10}),field:p.ComponentOptions.buildFieldOption({required:!0,section:"CommonOptions"}),sortCriteria:p.ComponentOptions.buildStringOption({postProcessing:function(e){if(e)return R.isFacetSortCriteria(e)?e:void new _.Logger(e).warn('sortCriteria is not of the the allowed values: "score", "alphanumeric", "occurrences"')},section:"Sorting"}),numberOfValues:p.ComponentOptions.buildNumberOption({min:0,defaultValue:8,section:"CommonOptions"}),enableCollapse:p.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"CommonOptions"}),enableScrollToTop:p.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"CommonOptions"}),enableMoreLess:p.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"CommonOptions"}),enableFacetSearch:p.ComponentOptions.buildBooleanOption({section:"Filtering"}),useLeadingWildcardInFacetSearch:p.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"Filtering",depend:"enableFacetSearch"}),collapsedByDefault:p.ComponentOptions.buildBooleanOption({defaultValue:!1,section:"CommonOptions",depend:"enableCollapse"}),includeInBreadcrumb:p.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"CommonOptions"}),numberOfValuesInBreadcrumb:p.ComponentOptions.buildNumberOption({defaultFunction:function(){return w.DeviceUtils.isMobileDevice()?3:5},min:0,depend:"includeInBreadcrumb",section:"CommonOptions"}),valueCaption:p.ComponentOptions.buildJsonOption({defaultValue:{}}),dependsOn:p.ComponentOptions.buildStringOption({section:"CommonOptions"}),dependsOnCondition:p.ComponentOptions.buildCustomOption(function(){return null},{depend:"dependsOn",section:"CommonOptions"}),injectionDepth:p.ComponentOptions.buildNumberOption({defaultValue:1e3,min:0}),filterFacetCount:p.ComponentOptions.buildBooleanOption({section:"Filtering"})}),t}(c.Component);t.DynamicFacet=L,h.Initialization.registerAutoCreateComponent(L),L.doExport()},171:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(21),s=n(18),r=n(45),a=n(1),l=n(17),u=function(){function e(e){var t=this;this.facet=e,this.facet.ref.bind.onRootElement(i.QueryEvents.buildingQuery,function(){return t.handleBuildingQuery()}),this.getDependsOn(this.facet.ref)&&this.facet.ref.bind.onRootElement(l.InitializationEvents.afterComponentsInitialization,function(){return t.setupDependentFacet()})}return e.prototype.setupDependentFacet=function(){var e=this;a.$$(this.facet.ref.element).addClass("coveo-hidden"),this.parentFacetRef=this.getParentFacet(this.facet.ref),this.parentFacetRef&&this.facet.ref.bind.onQueryState(s.MODEL_EVENTS.CHANGE,void 0,function(){return e.resetIfConditionUnfullfiled()})},e.prototype.resetIfConditionUnfullfiled=function(){this.getDependsOnCondition(this.facet.ref)(this.parentFacetRef)||this.facet.reset()},e.prototype.getId=function(e){var t=e.options.id;return t?""+t:null},e.prototype.getDependsOn=function(e){var t=e.options.dependsOn;return t?""+t:null},e.prototype.getDependsOnCondition=function(e){var t=this,n=e.options.dependsOnCondition;return n&&o.isFunction(n)?n:function(){return t.parentHasSelectedValues(e)}},e.prototype.parentHasSelectedValues=function(e){var t=this.getParentFacet(e);return t&&this.valuesExistForFacetWithId(this.getId(t))},e.prototype.valuesExistForFacetWithId=function(e){var t=this.facet.ref.queryStateModel.get(i.QueryStateModel.getFacetId(e));return!!t&&!!t.length},Object.defineProperty(e.prototype,"allFacetsInInterface",{get:function(){return r.ComponentsTypes.getAllFacetsFromSearchInterface(this.facet.ref.searchInterface)},enumerable:!0,configurable:!0}),e.prototype.getParentFacet=function(e){var t=this,n=this.allFacetsInInterface.filter(function(n){return t.getId(n)===t.getDependsOn(e)});return n.length?n[0]:(e.logger.warn("DependsOn reference does not exist",this.getDependsOn(this.facet.ref)),null)},Object.defineProperty(e.prototype,"dependentFacets",{get:function(){var e=this;return this.allFacetsInInterface.filter(function(t){return e.getId(e.facet.ref)===e.getDependsOn(t)})},enumerable:!0,configurable:!0}),e.prototype.handleBuildingQuery=function(){var e=this;this.dependentFacets.forEach(function(t){if(e.getDependsOnCondition(t)(e.facet.ref))return a.$$(t.element).removeClass("coveo-hidden"),t.enable();t.disable(),a.$$(t.element).addClass("coveo-hidden")})},Object.defineProperty(e.prototype,"hasDependentFacets",{get:function(){return!!this.dependentFacets.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dependentFacetsHaveSelectedValues",{get:function(){var e=this;return this.dependentFacets.some(function(t){return e.valuesExistForFacetWithId(e.getId(t))})},enumerable:!0,configurable:!0}),e}();t.DependsOnManager=u},173:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),s=n(8),r=n(3),a=n(21),l=n(2),u=function(e){function t(n,o,i){var r=e.call(this,n,t.ID,i)||this;if(r.element=n,r.options=s.ComponentOptions.initComponentOptions(n,t,o),r.options.preventScrolling){var a=r.options.scrollContainer||r.searchInterface.element;r.options.scrollContainer=s.ComponentOptions.findParentScrollLockable(a)}return r}return o(t,e),t.ID="FacetsMobileMode",t.options={breakpoint:s.ComponentOptions.buildNumberOption(),isModal:s.ComponentOptions.buildBooleanOption({defaultValue:!1}),displayOverlayWhileOpen:s.ComponentOptions.buildBooleanOption({postProcessing:function(e,t){return a.Utils.isNullOrUndefined(e)?!t.isModal:e}}),preventScrolling:s.ComponentOptions.buildBooleanOption({postProcessing:function(e,t){return a.Utils.isNullOrUndefined(e)?t.isModal:e}}),scrollContainer:s.ComponentOptions.buildChildHtmlElementOption({depend:"preventScrolling"})},t.doExport=function(){r.exportGlobally({FacetsMobileMode:t})},t}(i.Component);t.FacetsMobileMode=u,l.Initialization.registerAutoCreateComponent(u)},178:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.specific="specific",e.numericalRange="numericalRange",e.dateRange="dateRange",e.hierarchical="hierarchical"}(t.FacetType||(t.FacetType={}))},209:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(7),i=n(0),s=function(){function e(e,t){this.resultListOptions=e,this.autoCreateComponentsFn=t}return e.prototype.renderResults=function(e,t,n){var s=this;return void 0===t&&(t=!1),Promise.all([this.getStartFragment(e,t),this.getEndFragment(e,t)]).then(function(t){var r=t[0],a=t[1],l=document.createDocumentFragment();r&&l.appendChild(r),i.each(e,function(e){l.appendChild(e),n(o.Component.getResult(e),e)}),a&&l.appendChild(a),s.resultListOptions.resultsContainer.appendChild(l)})},e.prototype.getStartFragment=function(e,t){return Promise.resolve(document.createDocumentFragment())},e.prototype.getEndFragment=function(e,t){return Promise.resolve(document.createDocumentFragment())},e}();t.ResultListRenderer=s},210:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(528);var o=n(11),i=n(9),s=n(6),r=n(1),a=n(4),l=n(7),u=n(19),c=n(52),p=n(60),h=n(125),d=n(117),f=n(88),m=n(130),y=n(0),g=n(45),b=n(529),v=n(173),C=n(530),O=function(){function e(e,t,n,o){this.coveoRoot=e,this.ID=t,this.componentsInFacetColumn=[],this.preservePositionOriginalValues=[],this.searchInterface=l.Component.get(this.coveoRoot.el,u.SearchInterface,!1),this.dropdownHeaderLabel=this.getDropdownHeaderLabel(),this.dropdown=this.buildDropdown(o),this.bindDropdownContentEvents(),this.bindFacetsMobileModeEvents(),this.registerOnCloseHandler(),this.registerQueryEvents(),this.initializeBreakpoint(n.responsiveBreakpoint)}return e.init=function(t,n,o,i,s){this.findColumn(n)&&(p.ResponsiveComponentsManager.register(e,r.$$(n),"ResponsiveFacetColumn",o,i),p.ResponsiveComponentsManager.register(t,r.$$(n),s,o,i))},e.findColumn=function(e){var t=r.$$(e).find(".coveo-facet-column");if(!t){new i.Logger("ResponsiveFacets").info("No element with class coveo-facet-column. Responsive facets cannot be enabled")}return t},Object.defineProperty(e.prototype,"facetsMobileModeComponent",{get:function(){return this.searchInterface?this.searchInterface.getComponents(v.FacetsMobileMode.ID)[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"facetsMobileModeOptions",{get:function(){var e=this.facetsMobileModeComponent;return e?e.options:{isModal:!1,preventScrolling:!1,displayOverlayWhileOpen:!0}},enumerable:!0,configurable:!0}),e.prototype.registerComponent=function(e){return this.componentsInFacetColumn.push(e),this.preservePositionOriginalValues.push(e.options.preservePosition),!0},e.prototype.needDropdownWrapper=function(){return this.needSmallMode()},e.prototype.handleResizeEvent=function(){this.needSmallMode()&&!h.ResponsiveComponentsUtils.isSmallFacetActivated(this.coveoRoot)?this.changeToSmallMode():!this.needSmallMode()&&h.ResponsiveComponentsUtils.isSmallFacetActivated(this.coveoRoot)&&this.changeToLargeMode(),this.dropdown.isOpened&&this.dropdown.dropdownContent.positionDropdown()},e.prototype.dismissFacetSearches=function(){y.each(this.componentsInFacetColumn,function(e){e.facetSearch&&e.facetSearch.currentlyDisplayedResults&&e.facetSearch.dismissSearchResults()})},e.prototype.needSmallMode=function(){if(!this.searchInterface)return this.coveoRoot.width()<=(a.Utils.isNullOrUndefined(this.breakpoint)?(new c.ResponsiveComponents).getMediumScreenWidth():this.breakpoint);switch(this.searchInterface.responsiveComponents.getResponsiveMode()){case"small":case"medium":return!0;case"auto":return this.coveoRoot.width()<=(a.Utils.isNullOrUndefined(this.breakpoint)?this.searchInterface.responsiveComponents.getMediumScreenWidth():this.breakpoint);default:return!1}},e.prototype.changeToSmallMode=function(){this.dropdown.close(),this.disableFacetPreservePosition(),r.$$(this.coveoRoot.find("."+p.ResponsiveComponentsManager.DROPDOWN_HEADER_WRAPPER_CSS_CLASS)).append(this.dropdown.dropdownHeader.element.el),h.ResponsiveComponentsUtils.activateSmallFacet(this.coveoRoot)},e.prototype.changeToLargeMode=function(){this.restoreFacetPreservePositionValue(),this.dropdown.cleanUp(),h.ResponsiveComponentsUtils.deactivateSmallFacet(this.coveoRoot)},e.prototype.buildDropdown=function(e){var t=this.buildDropdownContent(),n=this.buildDropdownHeader(),o=e||new d.ResponsiveDropdown(t,n,this.coveoRoot);return this.facetsMobileModeOptions.displayOverlayWhileOpen||o.disablePopupBackground(),this.facetsMobileModeOptions.preventScrolling&&o.enableScrollLocking(this.facetsMobileModeOptions.scrollContainer),o},e.prototype.buildDropdownContent=function(){var t=this,n=r.$$(this.coveoRoot.find(".coveo-facet-column")),o=r.$$("div",{className:"coveo-facet-header-filter-by-container",style:"display: none"}),i=r.$$("div",{className:"coveo-facet-header-filter-by"});return i.text(s.l("Filter by:")),o.append(i.el),n.prepend(o.el),this.facetsMobileModeOptions.isModal?new b.ResponsiveDropdownModalContent("facet",n,s.l("CloseFiltersDropdown"),function(){return t.dropdown.close()}):new f.ResponsiveDropdownContent("facet",n,this.coveoRoot,e.DROPDOWN_MIN_WIDTH,e.DROPDOWN_WIDTH_RATIO)},e.prototype.buildDropdownHeader=function(){var e=r.$$("a"),t=r.$$("p");return t.text(this.dropdownHeaderLabel),e.el.appendChild(t.el),new m.ResponsiveDropdownHeader("facet",e)},e.prototype.initializeBreakpoint=function(e){var t=this.facetsMobileModeOptions.breakpoint;this.breakpoint=a.Utils.isNullOrUndefined(t)?e:t},e.prototype.registerOnCloseHandler=function(){this.dropdown.registerOnCloseHandler(this.dismissFacetSearches,this)},e.prototype.registerQueryEvents=function(){var e=this;this.coveoRoot.on(o.QueryEvents.noResults,function(){return e.handleNoResults()}),this.coveoRoot.on(o.QueryEvents.querySuccess,function(t,n){return e.handleQuerySuccess(n)}),this.coveoRoot.on(o.QueryEvents.queryError,function(){return e.handleQueryError()})},e.prototype.bindDropdownContentEvents=function(){var t=this;this.dropdown.dropdownContent.element.on("scroll",y.debounce(function(){y.each(t.componentsInFacetColumn,function(e){var n=e.facetSearch;n&&n.currentlyDisplayedResults&&!t.isFacetSearchScrolledIntoView(n.search)?e.facetSearch.positionSearchResults(t.dropdown.dropdownContent.element.el):n&&e.facetSearch.currentlyDisplayedResults&&e.facetSearch.positionSearchResults()})},e.DEBOUNCE_SCROLL_WAIT))},e.prototype.bindFacetsMobileModeEvents=function(){var e=this.facetsMobileModeComponent;e&&(this.dropdown.registerOnOpenHandler(function(){return r.$$(e.element).trigger(C.FacetsMobileModeEvents.popupOpened)},e),this.dropdown.registerOnCloseHandler(function(){return r.$$(e.element).trigger(C.FacetsMobileModeEvents.popupClosed)},e))},e.prototype.restoreFacetPreservePositionValue=function(){var e=this;y.each(this.componentsInFacetColumn,function(t,n){t.options&&(t.options.preservePosition=e.preservePositionOriginalValues[n])})},e.prototype.disableFacetPreservePosition=function(){y.each(this.componentsInFacetColumn,function(e){e.options&&(e.options.preservePosition=!1)})},e.prototype.isFacetSearchScrolledIntoView=function(e){var t=e.getBoundingClientRect().top,n=e.getBoundingClientRect().bottom,o=this.dropdown.dropdownContent.element.el.getBoundingClientRect().top,i=this.dropdown.dropdownContent.element.el.getBoundingClientRect().bottom;return o=o>=0?o:0,t>=o&&n<=i},e.prototype.getDropdownHeaderLabel=function(){var t;return g.ComponentsTypes.getAllFacetInstancesFromElement(this.coveoRoot.find(".coveo-facet-column")).forEach(function(e){var n=e.options;!t&&n.dropdownHeaderLabel&&(t=n.dropdownHeaderLabel)}),t||(t=s.l(e.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE)),t},e.prototype.handleNoResults=function(){this.dropdown.dropdownHeader.hide()},e.prototype.handleQueryError=function(){this.dropdown.dropdownHeader.hide()},e.prototype.handleQuerySuccess=function(e){0===e.results.totalCount?this.dropdown.dropdownHeader.hide():this.dropdown.dropdownHeader.show()},e.DEBOUNCE_SCROLL_WAIT=250,e.DROPDOWN_MIN_WIDTH=280,e.DROPDOWN_WIDTH_RATIO=.35,e.DROPDOWN_HEADER_LABEL_DEFAULT_VALUE="Filters",e}();t.ResponsiveFacetColumn=O},219:function(e,t){},220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(){function e(e){var t=o.$$("button",{className:e.className,ariaLabel:e.ariaLabel,type:"button"},e.label);this.element=o.$$("li",null,t).el,t.on("click",function(){return e.action()})}return e}();t.DynamicFacetValueShowMoreLessButton=i},221:function(e,t,n){"use strict";var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(22),s=n(68),r=n(10),a=n(6),l=n(178),u=function(){function e(e,t,n){this.facet=t,this.element=null,this.value=e.value,this.start=e.start,this.end=e.end,this.endInclusive=e.endInclusive,this.state=e.state,this.numberOfResults=e.numberOfResults,this.position=e.position,this.displayValue=e.displayValue,this.renderer=new n(this,t)}return Object.defineProperty(e.prototype,"isSelected",{get:function(){return this.state===s.FacetValueState.selected},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isIdle",{get:function(){return this.state===s.FacetValueState.idle},enumerable:!0,configurable:!0}),e.prototype.toggleSelect=function(){this.state===s.FacetValueState.selected?this.deselect():this.select()},e.prototype.select=function(){this.state=s.FacetValueState.selected},e.prototype.deselect=function(){this.state=s.FacetValueState.idle},e.prototype.equals=function(e){return("string"==typeof e?e:e.value).toLowerCase()===this.value.toLowerCase()},Object.defineProperty(e.prototype,"formattedCount",{get:function(){return i.format(this.numberOfResults,"n0")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectAriaLabel",{get:function(){var e=a.l("ResultCount",this.formattedCount,this.numberOfResults);return""+a.l("IncludeValueWithResultCount",this.displayValue,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRange",{get:function(){return this.facet.facetType!==l.FacetType.specific},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"analyticsValue",{get:function(){return this.isRange?this.start+".."+this.end:this.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeFacetState",{get:function(){return this.isRange?{start:""+this.start,end:""+this.end,endInclusive:this.endInclusive}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"analyticsFacetState",{get:function(){return o({},this.facet.basicAnalyticsFacetState,this.rangeFacetState,{value:this.analyticsValue,valuePosition:this.position,displayValue:this.displayValue,state:this.state})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rangeFacetMeta",{get:function(){return this.isRange?{facetRangeStart:""+this.start,facetRangeEnd:""+this.end,facetRangeEndInclusive:this.endInclusive}:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"analyticsFacetMeta",{get:function(){return o({},this.facet.basicAnalyticsFacetMeta,this.rangeFacetMeta,{facetValue:this.analyticsValue})},enumerable:!0,configurable:!0}),e.prototype.logSelectActionToAnalytics=function(){var e=this.state===s.FacetValueState.selected?r.analyticsActionCauseList.dynamicFacetSelect:r.analyticsActionCauseList.dynamicFacetDeselect;this.facet.logAnalyticsEvent(e,this.analyticsFacetMeta)},e.prototype.render=function(){return this.element=this.renderer.render(),this.element},Object.defineProperty(e.prototype,"renderedElement",{get:function(){return this.element?this.element:this.render()},enumerable:!0,configurable:!0}),e}();t.DynamicFacetValue=u},288:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),s=n(17),r=n(11),a=n(3),l=n(0),u=n(1),c=n(4),p=n(8),h=n(5),d=n(2),f=n(45),m=function(e){function t(n,o){var i=e.call(this,n,"DynamicFacetManager")||this;return i.options=o,i.childrenFacets=[],i.options=p.ComponentOptions.initComponentOptions(n,t,o),i.resetContainer(),i.prependContainer(),i.initEvents(),i}return o(t,e),Object.defineProperty(t.prototype,"enabledFacets",{get:function(){return this.childrenFacets.filter(function(e){return!e.disabled})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayedFacets",{get:function(){return this.childrenFacets.filter(function(e){return e.isCurrentlyDisplayed()})},enumerable:!0,configurable:!0}),t.prototype.resetContainer=function(){this.containerElement&&u.$$(this.containerElement).remove(),this.containerElement=u.$$("div",{className:"coveo-dynamic-facet-manager-container"}).el},t.prototype.prependContainer=function(){u.$$(this.element).prepend(this.containerElement)},t.prototype.initEvents=function(){var e=this;this.bind.onRootElement(s.InitializationEvents.afterComponentsInitialization,function(){return e.handleAfterComponentsInitialization()}),this.bind.onRootElement(r.QueryEvents.doneBuildingQuery,function(t){return e.handleDoneBuildingQuery(t)}),this.bind.onRootElement(r.QueryEvents.deferredQuerySuccess,function(t){return e.handleQuerySuccess(t)})},t.prototype.isDynamicFacet=function(e){return!!e.isDynamicFacet},Object.defineProperty(t.prototype,"allDynamicFacets",{get:function(){return f.ComponentsTypes.getAllFacetInstancesFromElement(this.element).filter(this.isDynamicFacet)},enumerable:!0,configurable:!0}),t.prototype.handleAfterComponentsInitialization=function(){var e=this;this.childrenFacets=this.allDynamicFacets,this.childrenFacets.forEach(function(t){t.dynamicFacetManager=e,e.containerElement.appendChild(t.element)}),this.element.children.length>1&&this.logger.warn("DynamicFacetManager contains incompatible elements. Those elements may be moved in the DOM.\n        To prevent this warning, move those elements outside of the DynamicFacetManager."),this.childrenFacets.length||this.disable()},t.prototype.handleDoneBuildingQuery=function(e){h.Assert.exists(e),h.Assert.exists(e.queryBuilder),this.enabledFacets.forEach(function(t){t.putStateIntoQueryBuilder(e.queryBuilder),t.putStateIntoAnalytics()})},t.prototype.handleQuerySuccess=function(e){return c.Utils.isNullOrUndefined(e.results.facets)?this.notImplementedError():(this.enabledFacets.forEach(function(t){t.handleQueryResults(e.results)}),e.query.facetOptions&&e.query.facetOptions.freezeFacetOrder?this.callOnUpdateOnChildrenFacets():(this.options.enableReorder&&(this.options.compareFacets?this.sortFacetsWithCompareOption():this.sortFacetsWithResponseOrder(e.results.facets),this.reorderFacetsInDom()),this.respectMaximumExpandedFacetsThreshold(),void this.callOnUpdateOnChildrenFacets()))},t.prototype.callOnUpdateOnChildrenFacets=function(){var e=this;this.options.onUpdate&&this.childrenFacets.forEach(function(t,n){return e.options.onUpdate(t,n)})},t.prototype.sortFacetsWithResponseOrder=function(e){var t=this,n=e.map(function(e){var n=e.facetId;return t.getChildFacetWithId(n)}).filter(c.Utils.exists),o=l.without.apply(void 0,[this.childrenFacets].concat(n));this.childrenFacets=n.concat(o)},t.prototype.sortFacetsWithCompareOption=function(){this.childrenFacets=this.childrenFacets.sort(this.options.compareFacets)},t.prototype.reorderFacetsInDom=function(){this.resetContainer();var e=document.createDocumentFragment();this.childrenFacets.forEach(function(t){return e.appendChild(t.element)}),this.containerElement.appendChild(e),this.prependContainer()},t.prototype.respectMaximumExpandedFacetsThreshold=function(){if(-1!==this.options.maximumNumberOfExpandedFacets){var e=l.partition(this.displayedFacets,function(e){return e.options.enableCollapse}),t=e[0],n=e[1],o=this.options.maximumNumberOfExpandedFacets-n.length;t.forEach(function(e){return o<1?e.collapse():e.options.collapsedByDefault?(e.logger.info('The facet has its "collapsedByDefault" option set to "true", which prevents the DynamicFacetManager from expanding it.',"While this configuration may be legitimate, it partially defeats the purpose of the dynamic navigation experience feature.","For more information, see https://docs.coveo.com/en/2917/."),e.collapse()):(o--,void e.expand())})}},t.prototype.getChildFacetWithId=function(e){return l.find(this.childrenFacets,function(t){return t.options.id===e})},t.prototype.notImplementedError=function(){this.logger.error("DynamicFacetManager is not supported by your current search endpoint. Disabling this component."),this.disable()},t.prototype.isCurrentlyDisplayed=function(){return!!l.find(this.childrenFacets,function(e){return e.isCurrentlyDisplayed()})},t.ID="DynamicFacetManager",t.doExport=function(){return a.exportGlobally({DynamicFacetManager:t})},t.options={enableReorder:p.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"Filtering"}),onUpdate:p.ComponentOptions.buildCustomOption(function(){return null}),compareFacets:p.ComponentOptions.buildCustomOption(function(){return null}),maximumNumberOfExpandedFacets:p.ComponentOptions.buildNumberOption({defaultValue:4,min:-1})},t}(i.Component);t.DynamicFacetManager=m,d.Initialization.registerAutoCreateComponent(m),m.doExport()},39:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(20),i=n(23),s=n(113),r=n(32),a=n(4),l=n(1),u=n(0),c=n(6),p=function(){function e(){}return e.getRegexToUseForFacetSearch=function(e,t){return new RegExp(o.StringUtils.stringToRegex(e,t),"i")},e.getDisplayValueFromValueCaption=function(e,t,n){var o=this.tryToGetTranslatedCaption(t,e);return n[e]||o},e.getValuesToUseForSearchInFacet=function(e,t){var n=[e],o=this.getRegexToUseForFacetSearch(e,t.options.facetSearchIgnoreAccents);return t.options.valueCaption?(u.chain(t.options.valueCaption).pairs().filter(function(e){return o.test(e[1])}).each(function(e){n.push(e[0])}),(i.QueryUtils.isStratusAgnosticField(t.options.field,"@objecttype")||i.QueryUtils.isStratusAgnosticField(t.options.field,"@filetype"))&&u.each(s.FileTypes.getFileTypeCaptions(),function(e,i){i in t.options.valueCaption||!o.test(e)||n.push(i)})):i.QueryUtils.isStratusAgnosticField(t.options.field,"@objecttype")||i.QueryUtils.isStratusAgnosticField(t.options.field,"@filetype")?u.each(u.filter(u.pairs(s.FileTypes.getFileTypeCaptions()),function(e){return o.test(e[1])}),function(e){n.push(e[0])}):i.QueryUtils.isStratusAgnosticField(t.options.field,"@month")&&u.each(u.range(1,13),function(e){o.test(r.DateUtils.monthToString(e-1))&&n.push(("0"+e.toString()).substr(-2))}),n},e.buildFacetSearchPattern=function(e){return e=u.map(e,function(e){return a.Utils.escapeRegexCharacter(e)}),e[0]=".*"+e[0]+".*",e.join("|")},e.needAnotherFacetSearch=function(e,t,n,o){return e<t&&e<o&&e>n},e.addNoStateCssClassToFacetValues=function(e,t){if(0!=e.values.getSelected().length){var n=l.$$(t).findAll("li:not(.coveo-selected)");u.each(n,function(e){l.$$(e).addClass("coveo-no-state")})}},e.tryToGetTranslatedCaption=function(t,n){var o;if(i.QueryUtils.isStratusAgnosticField(t.toLowerCase(),"@filetype"))o=s.FileTypes.getFileType(n).caption;else if(i.QueryUtils.isStratusAgnosticField(t.toLowerCase(),"@objecttype"))o=s.FileTypes.getObjectType(n).caption;else if(e.isMonthFieldValue(t,n)){var l=parseInt(n,10);o=r.DateUtils.monthToString(l-1)}else o=c.l(n);return void 0!=o&&a.Utils.isNonEmptyString(o)?o:n},e.isMonthFieldValue=function(e,t){if(!i.QueryUtils.isStratusAgnosticField(e.toLowerCase(),"@month"))return!1;var n=parseInt(t,10);return!isNaN(n)&&!(n<1||n>12)},e}();t.FacetUtils=p},461:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),s=n(90),r=n(0),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.defaultTemplate='<td><a class="CoveoResultLink"></a></td>\n                             <td><span class="CoveoExcerpt"></span></td>\n                             <td><span class="CoveoFieldValue" data-field="@date" data-helper="date"></span></td>',t.defaultRoledTemplates={"table-header":'<th style="width: 40%">Link</th>\n                     <th>Excerpt</th>\n                     <th style="width: 20%"\n                         class="CoveoSort coveo-table-header-sort"\n                         data-sort-criteria="date ascending,date descending"\n                         data-display-unselected-icon="false">Date</th>',"table-footer":"<th>Link</th>\n                     <th>Excerpt</th>\n                     <th>Date</th>"},t}return o(t,e),t.prototype.instantiateRoleToString=function(e){var t=r.find(this.templates,function(t){return t.role===e});return t?t.instantiateToString(void 0,{}):this.defaultRoledTemplates[e]},t.prototype.instantiateRoleToElement=function(e){var t=this,n=r.find(this.templates,function(t){return t.role===e});if(n)return n.instantiateToElement(void 0,{});var o=new i.Template(function(){return t.defaultRoledTemplates[e]});return o.layout="table",o.instantiateToElement(void 0)},t.prototype.getFallbackTemplate=function(){var e=this;return new i.Template(function(){return e.defaultTemplate})},t.prototype.hasTemplateWithRole=function(e){return r.find(this.templates,function(t){return t.role===e})},t}(s.TemplateList);t.TableTemplate=a},462:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(27),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.instantiateToString=function(e){return'<div class="coveo-result-frame">\n        <div class="coveo-result-row">\n          <div class="coveo-result-cell" style="width:40px;text-align:center;vertical-align:middle;">\n            <span class="CoveoIcon" data-small="true" data-with-label="false">\n            </span>\n          </div>\n          <div class="coveo-result-cell" style="padding:0 0 3px 5px;vertical-align:middle">\n            <div class="coveo-result-row">\n              <div class="coveo-result-cell" style="font-size:10pt;">\n                <a class="CoveoResultLink" style="display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis">\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>'},t.prototype.instantiateToElement=function(e){var t=this;return new Promise(function(n,o){var i=document.createElement("div");i.innerHTML=t.instantiateToString(e),n(i)})},t}(i.Template);t.DefaultRecommendationTemplate=s},463:function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,a)}l((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var s=n(21),r=n(87),a=n(0),l=n(1),u=n(9),c=function(){function e(e){this.args=e}return e.prototype.buildResults=function(e,t,n){return o(this,void 0,void 0,function(){var o,s,l=this;return i(this,function(i){return o=[],s=a.map(e.results,function(e,i){return l.buildResult(e,t,n).then(function(e){return null!=e&&o.push({elem:e,idx:i}),r.ResultList.resultCurrentlyBeingRendered=null,e})}),[2,Promise.all(s).then(function(){return a.pluck(a.sortBy(o,"idx"),"elem")})]})})},e.prototype.buildResult=function(e,t,n){return o(this,void 0,void 0,function(){var o;return i(this,function(i){switch(i.label){case 0:return s.Assert.exists(e),s.QueryUtils.setStateObjectOnQueryResult(this.args.queryStateModel.get(),e),s.QueryUtils.setSearchInterfaceObjectOnQueryResult(this.args.searchInterface,e),r.ResultList.resultCurrentlyBeingRendered=e,[4,this.createHtmlElement(e,t)];case 1:return o=i.sent(),null!=o&&s.Component.bindResultToElement(o,e),n.push(e),[4,this.autoCreateComponentsInsideResult(o,e).initResult];case 2:return i.sent(),this.verifyChildren(o),[2,o]}})})},e.prototype.autoCreateComponentsInsideResult=function(e,t){return s.Assert.exists(e),s.Initialization.automaticallyCreateComponentsInsideResult(e,t)},e.prototype.createHtmlElement=function(e,t){return this.args.resultTemplate.instantiateToElement(e,{wrapInDiv:!0,checkCondition:!0,currentLayout:t,responsiveComponents:this.args.searchInterface.responsiveComponents})},e.prototype.verifyChildren=function(e){l.$$(e).find(".CoveoResultLink")||new u.Logger(e).warn('Result does not contain a "CoveoResultLink" component, please verify the result template',this.args.resultTemplate)},e}();t.TemplateToHtml=c},464:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(31),i=n(0),s=n(1),r=function(){function e(e){this.container=e,this.hiddenElements=[],this.enable()}return Object.defineProperty(e.prototype,"focusableElements",{get:function(){return i.sortBy(this.container.querySelectorAll("[tabindex]"),function(e){return e.tabIndex})},enumerable:!0,configurable:!0}),e.prototype.disable=function(){document.removeEventListener("focusin",this.focusInEvent),document.removeEventListener("focusout",this.focusOutEvent),this.showHiddenElements(),this.enabled=!1},e.prototype.enable=function(){var e=this;document.addEventListener("focusin",this.focusInEvent=function(t){return e.onFocusIn(t)}),document.addEventListener("focusout",this.focusOutEvent=function(t){return e.onFocusOut(t)}),this.hideAllExcept(this.container),this.enabled=!0},e.prototype.showHiddenElements=function(){for(;this.hiddenElements.length;)this.hiddenElements.pop().removeAttribute("aria-hidden")},e.prototype.hideElement=function(e){e.getAttribute("aria-hidden")||(this.hiddenElements.push(e),e.setAttribute("aria-hidden",""+!0))},e.prototype.hideSiblings=function(e){var t=this,n=e.parentElement;n&&i.without(s.$$(n).children(),e).forEach(function(e){t.hideElement(e)})},e.prototype.hideAllExcept=function(e){this.hideSiblings(e);var t=e.parentElement;t&&t!==document.body&&this.hideAllExcept(t)},e.prototype.getFocusableSibling=function(e,t){void 0===t&&(t=!1);var n=this.focusableElements,o=n.indexOf(e);return-1===o?null:n[(o+(t?-1:1)+n.length)%n.length]},e.prototype.focusSibling=function(e,t){void 0===t&&(t=!1);var n=this.getFocusableSibling(e,t);n&&n.focus()},e.prototype.focusFirstElement=function(){var e=this.focusableElements;e.length&&e[0].focus()},e.prototype.elementIsBefore=function(e,t){return!!t&&e.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_PRECEDING},e.prototype.onLosingFocus=function(e,t){var n=this;o.Defer.defer(function(){n.enabled&&(n.enabled=!1,e&&n.focusIsAllowed(e)?n.focusSibling(e,n.elementIsBefore(e,t)):n.focusFirstElement(),n.enabled=!0)})},e.prototype.focusIsAllowed=function(e){return this.container.contains(e)},e.prototype.elementIsInPage=function(e){return e&&e!==document.body.parentElement},e.prototype.onFocusIn=function(e){if(this.enabled){var t=e.relatedTarget;if(!this.elementIsInPage(t)){var n=e.target;this.elementIsInPage(n)&&(this.focusIsAllowed(n)||this.onLosingFocus(null,n))}}},e.prototype.onFocusOut=function(e){if(this.enabled){var t=e.relatedTarget;this.elementIsInPage(t)&&(t&&this.focusIsAllowed(t)||this.onLosingFocus(e.target,t))}},e}();t.FocusTrap=r},465:function(e,t,n){"use strict";function o(){var e,t=A.Component.getComponentRef("ResultList");if(t&&(e=t.resultCurrentlyBeingRendered),!e){var n=A.Component.getComponentRef("Quickview");n&&(e=n.resultCurrentlyBeingRendered)}return e}function i(){var e=o();if(e)return e.termsToHighlight}function s(){var e=o();if(e)return e.phrasesToHighlight}function r(e,t){return d.Utils.isNonEmptyArray(R.keys(e))||d.Utils.isNonEmptyArray(R.keys(t))}var a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var l=n(115),u=n(67),c=n(32),p=n(129),h=n(177),d=n(4),f=n(20),m=n(69),y=n(176),g=n(23),b=n(24),v=n(1),C=n(50),O=n(114),F=n(39),S=n(22),R=n(0),A=n(7),w=n(65),T=function(){function e(){}return e.exportAllHelpersGlobally=function(e){R.each(l.TemplateHelpers.getHelpers(),function(t,n){void 0==e[n]&&(e[n]=t)})},e}();t.CoreHelpers=T,l.TemplateHelpers.registerFieldHelper("javascriptEncode",function(e){return d.Utils.exists(e)?f.StringUtils.javascriptEncode(e):void 0});var V=function(e,t){var n=u.StringAndHoles.shortenString(e,t.length,"...");return d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};l.TemplateHelpers.registerTemplateHelper("shorten",function(e,t,n,o){return V(e,{length:t,highlights:n,cssClass:o})}),l.TemplateHelpers.registerTemplateHelper("shortenv2",function(e,t){return V(e,t)});var E=function(e,t){var n=u.StringAndHoles.shortenPath(e,t.length);return d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};l.TemplateHelpers.registerTemplateHelper("shortenPath",function(e,t,n,o){return E(e,{length:t,highlights:n,cssClass:o})}),l.TemplateHelpers.registerFieldHelper("shortenPathv2",function(e,t){return E(e,t)});var D=function(e,t){var n=u.StringAndHoles.shortenUri(e,t.length);return d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(n.value,t.highlights,n.holes,t.cssClass||"highlight"):n.value};l.TemplateHelpers.registerTemplateHelper("shortenUri",function(e,t,n,o){return D(e,{length:t,highlights:n,cssClass:o})}),l.TemplateHelpers.registerTemplateHelper("shortenUriv2",function(e,t){return D(e,t)});var I=function(e,t){return d.Utils.exists(e)?d.Utils.exists(t.highlights)?u.HighlightUtils.highlightString(e,t.highlights,null,t.cssClass||"highlight"):e:void 0};l.TemplateHelpers.registerTemplateHelper("highlight",function(e,t,n){return I(e,{highlights:t,cssClass:n})}),l.TemplateHelpers.registerTemplateHelper("highlightv2",function(e,t){return I(e,t)});var $=function(e,t){return d.Utils.exists(e)&&d.Utils.exists(t.termsToHighlight)&&d.Utils.exists(t.phrasesToHighlight)?r(t.termsToHighlight,t.phrasesToHighlight)?O.StreamHighlightUtils.highlightStreamText(e,t.termsToHighlight,t.phrasesToHighlight,t.opts):e:void 0};l.TemplateHelpers.registerTemplateHelper("highlightStreamText",function(e,t,n,o){return void 0===t&&(t=i()),void 0===n&&(n=s()),$(e,{termsToHighlight:t,phrasesToHighlight:n,opts:o})}),l.TemplateHelpers.registerTemplateHelper("highlightStreamTextv2",function(e,t){var n=a({termsToHighlight:i(),phrasesToHighlight:s()},t);return $(e,n)});var x=function(e,t){return d.Utils.exists(e)&&d.Utils.exists(t.termsToHighlight)&&d.Utils.exists(t.phrasesToHighlight)?r(t.termsToHighlight,t.phrasesToHighlight)?O.StreamHighlightUtils.highlightStreamHTML(e,t.termsToHighlight,t.phrasesToHighlight,t.opts):e:void 0};l.TemplateHelpers.registerTemplateHelper("highlightStreamHTML",function(e,t,n,o){return void 0===t&&(t=i()),void 0===n&&(n=s()),x(e,{termsToHighlight:t,phrasesToHighlight:n,opts:o})}),l.TemplateHelpers.registerTemplateHelper("highlightStreamHTMLv2",function(e,t){var n=a({termsToHighlight:i(),phrasesToHighlight:s()},t);return x(e,n)}),l.TemplateHelpers.registerFieldHelper("number",function(e,t){if(d.Utils.exists(e)){var n=Number(e),o=R.isString(t)?t:t&&t.format;return o?f.StringUtils.htmlEncode(S.format(n,o)):f.StringUtils.htmlEncode(n.toString())}}),l.TemplateHelpers.registerFieldHelper("date",function(e,t){return c.DateUtils.dateToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),l.TemplateHelpers.registerFieldHelper("time",function(e,t){return c.DateUtils.timeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),l.TemplateHelpers.registerFieldHelper("dateTime",function(e,t){return c.DateUtils.dateTimeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),t)}),l.TemplateHelpers.registerFieldHelper("emailDateTime",function(e,t){var n={};n.includeTimeIfThisWeek=!0;var o=R.extend(t,n);return e?c.DateUtils.dateTimeToString(c.DateUtils.convertFromJsonDateIfNeeded(e),o):void 0}),l.TemplateHelpers.registerFieldHelper("currency",function(e,t){return p.CurrencyUtils.currencyToString(e,t)}),l.TemplateHelpers.registerFieldHelper("timeSpan",function(e,t){return void 0===t&&(t={isMilliseconds:!1}),new m.TimeSpan(e,t.isMilliseconds).getHHMMSS()}),l.TemplateHelpers.registerFieldHelper("email",function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o,i,s,r;if(R.isObject(t[0])?(o=t[0].companyDomain,i=t[0].me,s=t[0].lengthLimit,r=t[0].truncateName):(o=t[0],i=t[1],s=t[2],r=t[3]),void 0==s&&(s=2),void 0==r&&(r=!1),R.isString(e)){var a=y.EmailUtils.splitSemicolonSeparatedListOfEmailAddresses(e);return y.EmailUtils.emailAddressesToHyperlinks(a,o,i,s,r)}return R.isArray(e)?y.EmailUtils.emailAddressesToHyperlinks(e,o,i,s,r):void 0}),l.TemplateHelpers.registerTemplateHelper("excessEmailToggle",function(e){v.$$(e).removeClass("coveo-active"),v.$$(e).hasClass("coveo-emails-excess-collapsed")?R.each(v.$$(e).siblings(".coveo-emails-excess-expanded"),function(e){v.$$(e).addClass("coveo-active")}):v.$$(e).hasClass("coveo-hide-expanded")&&(v.$$(e.parentElement).addClass("coveo-inactive"),R.each(v.$$(e.parentElement).siblings(".coveo-emails-excess-collapsed"),function(e){v.$$(e).addClass("coveo-active")}))}),l.TemplateHelpers.registerFieldHelper("anchor",function(e,t){return h.AnchorUtils.buildAnchor(e,t)}),l.TemplateHelpers.registerFieldHelper("image",function(e,t,n){return void 0===n&&(n=o()),t&&t.srcTemplate?h.ImageUtils.buildImage(f.StringUtils.buildStringTemplateFromResult(t.srcTemplate,n),{alt:t.alt,height:t.height,width:t.width}):h.ImageUtils.buildImage(e,t)}),l.TemplateHelpers.registerTemplateHelper("thumbnail",function(e,t,n){if(void 0===e&&(e=o()),void 0===t&&(t="default"),g.QueryUtils.hasThumbnail(e))return h.ImageUtils.buildImageFromResult(e,C.SearchEndpoint.endpoints[t],n)}),l.TemplateHelpers.registerTemplateHelper("fromFileTypeToIcon",function(e,t){void 0===e&&(e=o()),void 0===t&&(t={});var n=A.Component.getComponentRef("Icon");if(n)return n.createIcon(e,t).outerHTML}),l.TemplateHelpers.registerTemplateHelper("attrEncode",function(e){return(""+e).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/'/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}),l.TemplateHelpers.registerTemplateHelper("loadTemplates",function(e,t){void 0===t&&(t=!0);var n,i="",s=o(),r=!1,a=e;return R.each(e,function(e,t,o){"default"==e&&(n=t)}),void 0!=n&&(a=R.omit(e,n)),R.each(a,function(e,n,o){r&&t||(r=r||e,i+=l.TemplateHelpers.getHelper("loadTemplate")(n,e,s))}),r||void 0==n||(i+=l.TemplateHelpers.getHelper("loadTemplate")(n,!0,s)),i});var _=["B","KB","MB","GB","TB","PB","EB"];l.TemplateHelpers.registerFieldHelper("size",function(e,t){for(var n=parseInt(e,10),o=null!=t&&null!=t.precision?t.precision:2,i=null!=t&&null!=t.base?t.base:0;n>1024&&i+1<_.length;)n/=1024,i++;return(n=Math.floor(n*Math.pow(10,o))/Math.pow(10,o))+" "+_[i]}),l.TemplateHelpers.registerFieldHelper("translatedCaption",function(e){return F.FacetUtils.tryToGetTranslatedCaption("@filetype",e)}),l.TemplateHelpers.registerTemplateHelper("loadTemplate",function(e,t,n){return void 0===t&&(t=!0),d.Utils.isNullOrUndefined(n)&&(n=o()),t?w.TemplateCache.getTemplate(e).instantiateToString(n,{checkCondition:!1}):""}),l.TemplateHelpers.registerTemplateHelper("encodeCarriageReturn",function(e){return d.Utils.isNullOrUndefined(e)?void 0:f.StringUtils.encodeCarriageReturn(e)}),l.TemplateHelpers.registerTemplateHelper("isMobileDevice",function(){return b.DeviceUtils.isMobileDevice()?b.DeviceUtils.getDeviceName():null})},496:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(16),s=function(){function e(e){this.rootOptions=e,this.create()}return e.prototype.create=function(){var e=this.rootOptions.iconSVG&&this.rootOptions.iconClassName;this.button=o.$$("button",{className:("coveo-dynamic-facet-header-btn "+(this.rootOptions.className||"")).trim(),type:"button"},e?this.rootOptions.iconSVG:this.rootOptions.label),this.rootOptions.action&&this.button.on("click",this.rootOptions.action),e&&(this.button.setAttribute("aria-label",this.rootOptions.label),this.button.setAttribute("title",this.rootOptions.label),i.SVGDom.addClassToSVGInContainer(this.button.el,this.rootOptions.iconClassName)),this.rootOptions.ariaLabel&&this.button.setAttribute("aria-label",this.rootOptions.ariaLabel),void 0!==this.rootOptions.shouldDisplay&&this.toggle(this.rootOptions.shouldDisplay),this.element=this.button.el},e.prototype.toggle=function(e){this.button.toggle(e)},e}();t.DynamicFacetHeaderButton=s},503:function(e,t,n){"use strict";var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),s=function(){function e(e){this.request=e}return e.prototype.buildBaseRequestForQuery=function(e){return o({},this.request,{filterFacetCount:this.getFilterFacetCount(!!e.filterField)})},e.prototype.getFilterFacetCount=function(e){return i.Utils.isUndefined(this.request.filterFacetCount)?!e:this.request.filterFacetCount},e}();t.DynamicFacetRequestBuilder=s},504:function(e,t){},505:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(561);var o=n(1),i=n(6),s=n(12),r=n(16),a=n(496),l=n(562),u=function(){function e(e){this.options=e,this.element=o.$$("div",{className:"coveo-dynamic-facet-header"}).el,this.title=this.createTitle(),o.$$(this.element).append(this.title.el),o.$$(this.element).append(this.createWaitAnimation()),o.$$(this.element).append(this.createClearButton()),this.options.enableCollapse&&this.enableCollapse()}return e.prototype.createClearButton=function(){var e=this;return this.clearButton=new a.DynamicFacetHeaderButton({label:i.l("Clear"),ariaLabel:i.l("Clear",this.options.title),className:"coveo-dynamic-facet-header-clear",shouldDisplay:!1,action:function(){return e.options.clear()}}),this.clearButton.element},e.prototype.createCollapseToggle=function(){return this.collapseToggle=new l.DynamicFacetHeaderCollapseToggle(this.options),this.collapseToggle.element},e.prototype.enableCollapse=function(){var e=this;o.$$(this.element).append(this.createCollapseToggle()),o.$$(this.title).addClass("coveo-clickable"),o.$$(this.title).on("click",function(){return e.options.toggleCollapse()})},e.prototype.toggleCollapse=function(e){this.options.enableCollapse&&this.collapseToggle.toggleButtons(e)},e.prototype.createTitle=function(){return o.$$("h2",{className:"coveo-dynamic-facet-header-title",ariaLabel:""+i.l("FacetTitle",this.options.title)},o.$$("span",{ariaHidden:!0,title:this.options.title},this.options.title))},e.prototype.createWaitAnimation=function(){return this.waitAnimation=o.$$("div",{className:"coveo-dynamic-facet-header-wait-animation"},s.SVGIcons.icons.loading),r.SVGDom.addClassToSVGInContainer(this.waitAnimation.el,"coveo-dynamic-facet-header-wait-animation-svg"),this.waitAnimation.toggle(!1),this.waitAnimation.el},e.prototype.toggleClear=function(e){this.clearButton.toggle(e)},e.prototype.showLoading=function(){var t=this;clearTimeout(this.showLoadingTimeout),this.showLoadingTimeout=window.setTimeout(function(){return t.waitAnimation.toggle(!0)},e.showLoadingDelay)},e.prototype.hideLoading=function(){clearTimeout(this.showLoadingTimeout),this.waitAnimation.toggle(!1)},e.showLoadingDelay=2e3,e}();t.DynamicFacetHeader=u},506:function(e,t,n){"use strict";function o(e){return!!i[e]}Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e.score="score",e.alphanumeric="alphanumeric",e.occurrences="occurrences"}(i=t.FacetSortCriteria||(t.FacetSortCriteria={})),t.isFacetSortCriteria=o},507:function(e,t,n){"use strict";var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,a)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),a=n(563),l=n(0),u=n(12),c=n(16),p=n(564);n(565);var h=n(4),d=n(6),f=function(){function e(e){this.options=e,this.defaultOptions={wrapperClassName:"",clearOnBlur:!1},this.throttlingDelay=600,this.isRequestCancelled=!1,this.throttledRequest=l.throttle(this.triggerRequest,this.throttlingDelay,{leading:!0,trailing:!0}),this.options=o({},this.defaultOptions,this.options),this.id=l.uniqueId("coveo-combobox-"),this.create()}return e.prototype.create=function(){this.element=r.$$("div",{className:"coveo-combobox-wrapper "+this.options.wrapperClassName}).el,this.createAndAppendInput(),this.createAndAppendWaitAnimation(),this.createAndAppendValues()},e.prototype.createAndAppendInput=function(){this.input=new a.ComboboxInput(this),this.element.appendChild(this.input.element)},e.prototype.createAndAppendWaitAnimation=function(){this.waitAnimationElement=r.$$("div",{className:"coveo-combobox-wait-animation"},u.SVGIcons.icons.loading).el,c.SVGDom.addClassToSVGInContainer(this.waitAnimationElement,"coveo-combobox-wait-animation-svg"),this.toggleWaitAnimation(!1),this.input.element.appendChild(this.waitAnimationElement)},e.prototype.toggleWaitAnimation=function(e){r.$$(this.waitAnimationElement).toggle(e)},e.prototype.createAndAppendValues=function(){this.values=new p.ComboboxValues(this),this.element.appendChild(this.values.element)},e.prototype.clearAll=function(){this.clearValues(),this.input.clearInput()},e.prototype.clearValues=function(){this.values.clearValues(),this.cancelRequest()},e.prototype.cancelRequest=function(){this.toggleWaitAnimation(!1),this.throttledRequest.cancel(),this.isRequestCancelled=!0},e.prototype.onInputChange=function(e){var t=this;if(h.Utils.isEmptyString(e))return this.clearValues();this.throttledRequest(function(){return t.options.requestValues(e)},function(){return t.values.resetScroll()})},e.prototype.onInputBlur=function(){if(!this.values.mouseIsOverValue&&!this.values.isRenderingNewValues)return this.options.clearOnBlur?this.clearAll():void this.clearValues()},e.prototype.updateAccessibilityAttributes=function(e){this.input.updateAccessibilityAttributes(e)},e.prototype.updateAriaLive=function(){if(!this.values.hasValues())return void this.options.ariaLive.updateText(d.l("NoValuesFound"));var e=d.l("ShowingResultsWithQuery",this.values.numberOfValues,this.input.value,this.values.numberOfValues);this.options.scrollable&&this.options.scrollable.areMoreValuesAvailable()&&(e=e+" ("+d.l("MoreValuesAvailable")+")"),this.options.ariaLive.updateText(e)},e.prototype.onScrollEndReached=function(){var e=this;this.values.saveFocusedValue(),this.options.scrollable&&this.throttledRequest(function(){return e.options.scrollable.requestMoreValues()},function(){return e.values.restoreFocusedValue()})},e.prototype.triggerRequest=function(e,t){return i(this,void 0,void 0,function(){var n;return s(this,function(o){switch(o.label){case 0:return this.isRequestCancelled=!1,this.toggleWaitAnimation(!0),[4,e()];case 1:return n=o.sent(),this.toggleWaitAnimation(!1),this.isRequestCancelled||(this.values.renderFromResponse(n),t&&t()),[2]}})})},e}();t.Combobox=f},508:function(e,t){},509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(64),i=n(1),s=function(){function e(e,t){void 0===t&&(t=function(){}),this.facetValue=e,this.checkbox=new o.Checkbox(t.bind(this),this.facetValue.displayValue,this.facetValue.selectAriaLabel,"("+this.facetValue.formattedCount+")");var n=i.$$(this.checkbox.getElement()).find(".coveo-checkbox-span-label"),s=i.$$(this.checkbox.getElement()).find(".coveo-checkbox-span-label-suffix");n&&s&&(n.setAttribute("title",this.facetValue.displayValue),n.setAttribute("aria-hidden","true"),s.setAttribute("aria-hidden","true")),this.facetValue.isSelected&&this.checkbox.select(!1),this.element=this.checkbox.getElement()}return e}();t.DynamicFacetValueCheckbox=s},510:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(576);var o=n(1),i=n(0),s=n(68),r=n(6),a=n(220),l=function(){function e(e,t){this.facet=e,this.list=o.$$("ul",{className:"coveo-dynamic-facet-values"}).el,this.valueCreator=new t(this.facet),this.resetValues()}return e.prototype.createFromResponse=function(e){var t=this;this.facetValues=e.values.map(function(e,n){return t.valueCreator.createFromResponse(e,n)})},e.prototype.resetValues=function(){this.facetValues=this.valueCreator.getDefaultValues()},Object.defineProperty(e.prototype,"allFacetValues",{get:function(){return this.facetValues},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allValues",{get:function(){return this.facetValues.map(function(e){return e.value})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedValues",{get:function(){return this.facetValues.filter(function(e){return e.isSelected}).map(function(e){return e.value})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedDisplayValues",{get:function(){return this.facetValues.filter(function(e){return e.isSelected}).map(function(e){return e.displayValue})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeValues",{get:function(){return this.facetValues.filter(function(e){return!e.isIdle})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayedValues",{get:function(){return this.facetValues.filter(function(e){return!e.isIdle||e.numberOfResults>0})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasSelectedValues",{get:function(){return!!i.findWhere(this.facetValues,{state:s.FacetValueState.selected})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasActiveValues",{get:function(){return!!this.activeValues.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasIdleValues",{get:function(){return!!i.findWhere(this.facetValues,{state:s.FacetValueState.idle})},enumerable:!0,configurable:!0}),e.prototype.clearAll=function(){this.facetValues.forEach(function(e){return e.deselect()})},Object.defineProperty(e.prototype,"hasValues",{get:function(){return!!this.allFacetValues.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasDisplayedValues",{get:function(){return!!this.displayedValues.length},enumerable:!0,configurable:!0}),e.prototype.hasSelectedValue=function(e){var t="string"==typeof e?e:e.value,n=i.find(this.facetValues,function(e){return e.equals(t)});return n&&n.isSelected},e.prototype.get=function(e){var t="string"==typeof e?e:e.value,n=i.find(this.facetValues,function(e){return e.equals(t)});if(n)return n;var o=this.valueCreator.createFromValue(t);return o?(this.facetValues.push(o),o):null},e.prototype.buildShowLess=function(){var e=this;return new a.DynamicFacetValueShowMoreLessButton({className:"coveo-dynamic-facet-show-less",ariaLabel:r.l("ShowLessFacetResults",this.facet.options.title),label:r.l("ShowLess"),action:function(){e.facet.enableFreezeFacetOrderFlag(),e.facet.showLessValues()}}).element},e.prototype.buildShowMore=function(){var e=this;return new a.DynamicFacetValueShowMoreLessButton({className:"coveo-dynamic-facet-show-more",ariaLabel:r.l("ShowMoreFacetResults",this.facet.options.title),label:r.l("ShowMore"),action:function(){e.facet.enableFreezeFacetOrderFlag(),e.facet.showMoreValues()}}).element},Object.defineProperty(e.prototype,"shouldEnableShowLess",{get:function(){return this.facetValues.length>this.facet.options.numberOfValues&&this.hasIdleValues},enumerable:!0,configurable:!0}),e.prototype.appendShowMoreLess=function(e){this.facet.options.enableMoreLess&&(this.shouldEnableShowLess&&e.appendChild(this.buildShowLess()),this.facet.moreValuesAvailable&&e.appendChild(this.buildShowMore()))},e.prototype.appendSelectedCollapsedValues=function(e){if(this.hasSelectedValues){var t=this.selectedDisplayValues.join(", ");e.appendChild(o.$$("li",{className:"coveo-dynamic-facet-collapsed-values",ariaLabel:r.l("CurrentSelections")+": "+t},i.escape(t)).el)}},e.prototype.render=function(){var e=document.createDocumentFragment();return o.$$(this.list).empty(),this.displayedValues.forEach(function(t){e.appendChild(t.renderedElement)}),this.appendShowMoreLess(e),this.appendSelectedCollapsedValues(e),this.list.appendChild(e),this.list},e}();t.DynamicFacetValues=l},511:function(e,t,n){"use strict";var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(5),s=n(11),r=n(0),a=n(503),l=function(){function e(e){this.facet=e,this.freezeCurrentValues=!1,this.freezeFacetOrder=!1,this.preventAutoSelection=!1,this.requestBuilder=new a.DynamicFacetRequestBuilder({facetId:this.facet.options.id,field:this.facet.fieldName,type:this.facet.facetType,sortCriteria:this.facet.options.sortCriteria,injectionDepth:this.facet.options.injectionDepth,filterFacetCount:this.facet.options.filterFacetCount}),this.resetNumberOfValuesToRequest(),this.resetFlagsDuringQuery()}return e.prototype.resetFlagsDuringQuery=function(){var e=this;this.facet.bind.onRootElement(s.QueryEvents.duringQuery,function(){e.freezeCurrentValues=!1,e.freezeFacetOrder=!1,e.preventAutoSelection=!1})},e.prototype.increaseNumberOfValuesToRequest=function(e){this.numberOfValuesToRequest+=e},e.prototype.resetNumberOfValuesToRequest=function(){this.numberOfValuesToRequest=this.facet.options.numberOfValues},e.prototype.enablePreventAutoSelectionFlag=function(){this.preventAutoSelection=!0},e.prototype.enableFreezeCurrentValuesFlag=function(){this.areValuesIncorrectlyAffectedByDependsOn||(this.freezeCurrentValues=!0)},e.prototype.enableFreezeFacetOrderFlag=function(){this.freezeFacetOrder=!0},Object.defineProperty(e.prototype,"areValuesIncorrectlyAffectedByDependsOn",{get:function(){return!!this.facet.dependsOnManager.hasDependentFacets&&(!this.facet.dependsOnManager.dependentFacetsHaveSelectedValues&&this.currentValues.length<this.numberOfValuesToRequest)},enumerable:!0,configurable:!0}),e.prototype.putFacetIntoQueryBuilder=function(e){i.Assert.exists(e),e.facetRequests.push(this.buildFacetRequest(e.build())),this.freezeFacetOrder&&(e.facetOptions.freezeFacetOrder=!0)},e.prototype.buildFacetRequest=function(e){return o({},this.requestBuilder.buildBaseRequestForQuery(e),{currentValues:this.currentValues,numberOfValues:this.numberOfValues,freezeCurrentValues:this.freezeCurrentValues,preventAutoSelect:this.preventAutoSelection,isFieldExpanded:this.numberOfValuesToRequest>this.facet.options.numberOfValues})},e.prototype.getQueryResults=function(){var e=this.facet.queryController.getLastQuery();e.numberOfResults=0;var t=r.findIndex(e.facets,{facetId:this.facet.options.id});return-1!==t?e.facets[t]=this.buildFacetRequest(e):e.facets?e.facets.push(this.buildFacetRequest(e)):e.facets=[this.buildFacetRequest(e)],this.facet.queryController.getEndpoint().search(e)},Object.defineProperty(e.prototype,"currentValues",{get:function(){return this.facet.values.allFacetValues.map(function(e){return{value:e.value,state:e.state}})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfValues",{get:function(){return this.freezeCurrentValues?this.currentValues.length:Math.max(this.numberOfValuesToRequest,this.facet.values.activeValues.length)},enumerable:!0,configurable:!0}),e}();t.DynamicFacetQueryController=l},512:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(509),s=function(){function e(e,t){this.facetValue=e,this.facet=t}return e.prototype.render=function(){return this.dom=o.$$("li",{className:"coveo-dynamic-facet-value",dataValue:this.facetValue.value}),this.toggleSelectedClass(),this.renderCheckbox(),this.addFocusAndBlurEventListeners(),this.dom.el},e.prototype.toggleSelectedClass=function(){this.dom.toggleClass("coveo-selected",this.facetValue.isSelected)},e.prototype.renderCheckbox=function(){this.valueCheckbox=new i.DynamicFacetValueCheckbox(this.facetValue,this.selectAction.bind(this)),this.dom.append(this.valueCheckbox.element)},e.prototype.addFocusAndBlurEventListeners=function(){var e=this,t=o.$$(this.valueCheckbox.element).find("button");o.$$(t).on("focusin",function(){return e.onFocusIn()}),o.$$(t).on("focusout",function(){return e.onFocusOut()})},e.prototype.onFocusIn=function(){this.dom.addClass("coveo-focused")},e.prototype.onFocusOut=function(){this.dom.removeClass("coveo-focused")},e.prototype.selectAction=function(){var e=this;this.facet.toggleSelectValue(this.facetValue.value),this.toggleSelectedClass(),this.facet.enableFreezeCurrentValuesFlag(),this.facet.enableFreezeFacetOrderFlag(),this.facet.enablePreventAutoSelectionFlag(),this.facet.scrollToTop(),this.facet.triggerNewQuery(function(){return e.facetValue.logSelectActionToAnalytics()})},e}();t.DynamicFacetValueRenderer=s},521:function(e,t){},522:function(e,t){},523:function(e,t){},524:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(60),i=n(19),s=n(87),r=n(1),a=n(7),l=n(9),u=function(){function e(e,t,n,o){this.coveoRoot=e,this.ID=t,this.searchInterface=a.Component.get(this.coveoRoot.el,i.SearchInterface,!1),this.currentMode="large"}return e.init=function(t,n,i){if(!r.$$(t).find("."+a.Component.computeCssClassName(s.ResultList))){return void new l.Logger("ResponsiveDefaultResultTemplate").trace("No ResultLayout component found : Cannot instantiate ResponsiveResultLayout")}o.ResponsiveComponentsManager.register(e,r.$$(t),s.ResultList.ID,n,i)},e.prototype.registerComponent=function(e){return e instanceof s.ResultList&&(this.resultList=e,!0)},e.prototype.handleResizeEvent=function(){var e=this,t=this.resultList.queryController.getLastResults();this.needSmallMode()?(r.$$(this.resultList.options.resultsContainer).addClass("coveo-card-layout-container"),r.$$(this.resultList.options.resultsContainer).removeClass("coveo-list-layout-container"),"small"!=this.currentMode&&(t&&this.resultList.buildResults(t).then(function(t){e.resultList.renderResults(t)}),this.currentMode="small")):(r.$$(this.resultList.options.resultsContainer).removeClass("coveo-card-layout-container"),r.$$(this.resultList.options.resultsContainer).addClass("coveo-list-layout-container"),"large"!=this.currentMode&&(t&&this.resultList.buildResults(t).then(function(t){e.resultList.renderResults(t)}),this.currentMode="large"))},e.prototype.needSmallMode=function(){return this.coveoRoot.width()<=this.searchInterface.responsiveComponents.getSmallScreenWidth()},e}();t.ResponsiveDefaultResultTemplate=u},525:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=function(){function e(e,t){this.searchInterface=t,this.resultContainerElement=o.$$(e)}return e.prototype.empty=function(){this.searchInterface.detachComponentsInside(this.resultContainerElement.el),o.$$(this.resultContainerElement).empty()},e.prototype.addClass=function(e){this.resultContainerElement.addClass(e)},e.prototype.isEmpty=function(){return this.resultContainerElement.isEmpty()},e.prototype.hideChildren=function(){this.resultContainerElement.children().forEach(function(e){return o.$$(e).hide()})},e.prototype.getResultElements=function(){return this.resultContainerElement.findAll(".CoveoResult")},Object.defineProperty(e.prototype,"el",{get:function(){return this.resultContainerElement.el},enumerable:!0,configurable:!0}),e.resultCurrentlyBeingRendered=null,e}();t.ResultContainer=i},526:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(209),s=n(1),r=n(0),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getEndFragment=function(e){var t=this;return new Promise(function(n){if(!r.isEmpty(e)){if(t.resultListOptions.enableInfiniteScroll){var o=s.$$(t.resultListOptions.resultsContainer).findAll(".coveo-card-layout-padding");r.each(o,function(e){return s.$$(e).remove()})}var i=document.createDocumentFragment();r.times(3,function(){return i.appendChild(s.$$("div",{className:"coveo-card-layout coveo-card-layout-padding"}).el)}),n(i)}n(null)})},t}(i.ResultListRenderer);t.ResultListCardRenderer=a},527:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,a)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(209),a=n(461),l=n(1),u=n(0),c=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.resultListOptions=t,o.autoCreateComponentsFn=n,o.shouldDisplayHeader=!0,o.shouldDisplayFooter=!1,o.resultListOptions.resultTemplate instanceof a.TableTemplate&&(o.resultListOptions.resultTemplate.hasTemplateWithRole("table-footer")&&(o.shouldDisplayFooter=!0),0===o.resultListOptions.resultTemplate.templates.length||o.resultListOptions.resultTemplate.hasTemplateWithRole("table-header")||(o.shouldDisplayHeader=!1)),o}return o(t,e),t.prototype.getStartFragment=function(e,t){if(!t&&!u.isEmpty(e)&&this.shouldDisplayHeader)return this.renderRoledTemplate("table-header")},t.prototype.getEndFragment=function(e,t){if(!t&&!u.isEmpty(e)&&this.shouldDisplayFooter)return this.renderRoledTemplate("table-footer")},t.prototype.renderRoledTemplate=function(e){return i(this,void 0,void 0,function(){var t,n;return s(this,function(o){switch(o.label){case 0:return[4,this.resultListOptions.resultTemplate.instantiateRoleToElement(e)];case 1:return t=o.sent(),l.$$(t).addClass("coveo-result-list-"+e),this.autoCreateComponentsFn(t,void 0),n=document.createDocumentFragment(),n.appendChild(t),[2,n]}})})},t}(r.ResultListRenderer);t.ResultListTableRenderer=c},528:function(e,t){},529:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(88),i=n(21),s=n(12),r=n(464),a=function(){function e(e,t,n,o){this.componentName=e,this.element=t,this.closeButtonLabel=n,this.close=o,this.className="coveo-"+this.componentName+"-dropdown-modal-content"}return Object.defineProperty(e.prototype,"hidden",{set:function(e){this.element.toggleClass("coveo-hidden",e)},enumerable:!0,configurable:!0}),e.prototype.positionDropdown=function(){this.element.el.classList.add(this.className,o.ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME),this.element.setAttribute("role","group"),this.element.setAttribute("aria-label",i.l("FiltersDropdown")),this.hidden=!1,this.ensureCloseButton(),this.ensureFocusTrap()},e.prototype.hideDropdown=function(){this.element.el.classList.remove(this.className,o.ResponsiveDropdownContent.DEFAULT_CSS_CLASS_NAME),this.element.setAttribute("role",null),this.element.setAttribute("aria-label",null),this.hidden=!0,this.removeCloseButton(),this.removeFocusTrap()},e.prototype.cleanUp=function(){this.hidden=!1},e.prototype.ensureCloseButton=function(){var e=this;this.closeButton||(this.closeButton=i.$$("button",{className:"coveo-facet-modal-close-button",ariaLabel:this.closeButtonLabel},s.SVGIcons.icons.mainClear),this.closeButton.on("click",function(){return e.close()}),this.element.prepend(this.closeButton.el))},e.prototype.ensureFocusTrap=function(){this.focusTrap||(this.focusTrap=new r.FocusTrap(this.element.el))},e.prototype.removeCloseButton=function(){this.closeButton&&(this.closeButton.remove(),this.closeButton=null)},e.prototype.removeFocusTrap=function(){this.focusTrap&&(this.focusTrap.disable(),this.focusTrap=null)},e}();t.ResponsiveDropdownModalContent=a},530:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.popupOpened="popupOpened",e.popupClosed="popupClosed",e}();t.FacetsMobileModeEvents=o},561:function(e,t){},562:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),i=n(12),s=n(1),r=n(496),a=function(){function e(e){this.options=e,this.create()}return e.prototype.create=function(){var e=this,t=s.$$("div");this.collapseButton=new r.DynamicFacetHeaderButton({label:o.l("CollapseFacet",this.options.title),iconSVG:i.SVGIcons.icons.arrowUp,iconClassName:"coveo-dynamic-facet-collapse-toggle-svg",className:"coveo-dynamic-facet-header-collapse",shouldDisplay:!0,action:function(){e.options.collapse(),e.expandButton.element.focus()}}),this.expandButton=new r.DynamicFacetHeaderButton({label:o.l("ExpandFacet",this.options.title),iconSVG:i.SVGIcons.icons.arrowDown,iconClassName:"coveo-dynamic-facet-collapse-toggle-svg",className:"coveo-dynamic-facet-header-expand",shouldDisplay:!1,action:function(){e.options.expand(),e.collapseButton.element.focus()}}),t.append(this.collapseButton.element),t.append(this.expandButton.element),this.element=t.el},e.prototype.toggleButtons=function(e){this.collapseButton.toggle(!e),this.expandButton.toggle(e)},e}();t.DynamicFacetHeaderCollapseToggle=a},563:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(54),i=n(1),s=n(25),r=n(4),a=function(){function e(e){this.combobox=e,this.inputOptions={usePlaceholder:!0,className:"coveo-combobox-input",triggerOnChangeAsYouType:!0,isRequired:!1,icon:"search"},this.create(),this.element=this.textInput.getElement(),this.inputElement=i.$$(this.element).find("input"),this.addEventListeners(),this.addAccessibilityAttributes()}return Object.defineProperty(e.prototype,"value",{get:function(){return this.inputElement.value},enumerable:!0,configurable:!0}),e.prototype.create=function(){var e=this;this.textInput=new o.TextInput(function(t){return e.combobox.onInputChange(t.getValue())},this.combobox.options.placeholderText,this.inputOptions)},e.prototype.addEventListeners=function(){var e=this;this.combobox.options.clearOnBlur||this.inputElement.addEventListener("focus",function(){return e.combobox.onInputChange(e.textInput.getValue())}),this.combobox.element.addEventListener("focusout",function(t){return e.handleFocusOut(t)}),this.combobox.element.addEventListener("keydown",function(t){return e.handleKeyboardDirection(t)}),this.combobox.element.addEventListener("keyup",function(t){return e.handleKeyboardEnterEscape(t)})},e.prototype.addAccessibilityAttributes=function(){var e=this.combobox.id+"-listbox";this.inputElement.setAttribute("role","combobox"),this.inputElement.setAttribute("aria-owns",e),this.inputElement.setAttribute("aria-haspopup","listbox"),this.inputElement.setAttribute("aria-autocomplete","list"),this.inputElement.setAttribute("id",this.combobox.id+"-input"),this.inputElement.setAttribute("aria-label",this.combobox.options.label),this.updateAccessibilityAttributes({activeDescendant:"",expanded:!1})},e.prototype.updateAccessibilityAttributes=function(e){this.inputElement.setAttribute("aria-expanded",e.expanded?"true":"false"),r.Utils.isEmptyString(e.activeDescendant)?this.inputElement.removeAttribute("aria-activedescendant"):this.inputElement.setAttribute("aria-activedescendant",e.activeDescendant)},e.prototype.clearInput=function(){this.textInput.reset()},e.prototype.handleFocusOut=function(e){var t=e.relatedTarget;if(!this.combobox.element.contains(t)){if(i.$$(this.combobox.element).find(".coveo-combobox-values:hover"))return void this.inputElement.focus();this.combobox.onInputBlur()}},e.prototype.handleKeyboardDirection=function(e){switch(e.which){case s.KEYBOARD.DOWN_ARROW:e.preventDefault(),this.combobox.values.focusNextValue();break;case s.KEYBOARD.UP_ARROW:e.preventDefault(),this.combobox.values.focusPreviousValue();break;case s.KEYBOARD.HOME:e.preventDefault(),this.combobox.values.focusFirstValue();break;case s.KEYBOARD.END:e.preventDefault(),this.combobox.values.focusLastValue()}},e.prototype.handleKeyboardEnterEscape=function(e){switch(e.which){case s.KEYBOARD.ENTER:this.combobox.values.selectActiveValue();break;case s.KEYBOARD.ESCAPE:r.Utils.isNonEmptyString(this.textInput.getValue())&&e.stopPropagation(),this.combobox.clearAll()}},e}();t.ComboboxInput=a},564:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(0),s=n(6),r=n(0),a=function(){function e(e){var t=this;this.combobox=e,this.mouseIsOverValue=!1,this.isRenderingNewValues=!1,this.values=[],this.element=o.$$("ul",{id:this.combobox.id+"-listbox",role:"listbox",className:"coveo-combobox-values",ariaLabelledby:this.combobox.id+"-input"}).el,o.$$(this.element).hide(),this.isScrollable=!!this.combobox.options.scrollable,this.isScrollable&&this.element.addEventListener("scroll",function(){return t.onScroll()})}return e.prototype.renderFromResponse=function(e){this.isRenderingNewValues=!0,this.clearValues(),this.values=this.combobox.options.createValuesFromResponse(e),this.render(),this.combobox.updateAriaLive(),this.isRenderingNewValues=!1},e.prototype.render=function(){if(o.$$(this.element).show(),!this.hasValues())return this.renderNoValuesFound();this.renderValues(),this.addEventListeners(),this.updateAccessibilityAttributes()},e.prototype.renderValues=function(){var e=this,t=document.createDocumentFragment();this.values.forEach(function(n,i){var s=o.$$("li",{id:e.combobox.id+"-value-"+i,className:"coveo-combobox-value",role:"option",tabindex:0},n.element).el;e.highlightCurrentQueryInSearchResults(n.element),n.element=s,t.appendChild(n.element)}),this.element.appendChild(t)},e.prototype.highlightCurrentQueryInSearchResults=function(e){if(this.combobox.options.highlightValueClassName){var t=new RegExp("("+this.combobox.element.querySelector("input").value+")","ig"),n=o.$$(e).hasClass(this.combobox.options.highlightValueClassName)?e:o.$$(e).find("."+this.combobox.options.highlightValueClassName);if(n){var i=r.escape(o.$$(n).text());n.innerHTML=i.replace(t,'<span class="coveo-highlight">$1</span>')}}},e.prototype.hasValues=function(){return!!this.numberOfValues},Object.defineProperty(e.prototype,"numberOfValues",{get:function(){return this.values.length},enumerable:!0,configurable:!0}),e.prototype.renderNoValuesFound=function(){var e=o.$$("li",{role:"option",className:"coveo-combobox-value-not-found"},s.l("NoValuesFound")).el;this.element.appendChild(e)},e.prototype.addEventListeners=function(){var e=this;this.values.forEach(function(t){o.$$(t.element).on("mouseenter",function(){return e.mouseIsOverValue=!0}),o.$$(t.element).on("mouseleave",function(){return e.mouseIsOverValue=!1}),o.$$(t.element).on("click",function(t){return e.onValueClick(t)}),o.$$(t.element).on("focus",function(){return e.setKeyboardActiveValue(t)})})},e.prototype.onValueClick=function(e){var t=e.target,n=o.$$(t).hasClass("coveo-combobox-value")?t:o.$$(t).parent("coveo-combobox-value");if(n){var s=n.getAttribute("id"),r=i.find(this.values,function(e){return e.element.getAttribute("id")===s});r&&this.combobox.options.onSelectValue(r),this.combobox.clearAll()}},e.prototype.updateAccessibilityAttributes=function(){var e=this.keyboardActiveValue?this.keyboardActiveValue.element.getAttribute("id"):"";this.combobox.updateAccessibilityAttributes({activeDescendant:e,expanded:this.hasValues()})},e.prototype.clearValues=function(){this.mouseIsOverValue=!1,this.resetKeyboardActiveValue(),o.$$(this.element).empty(),o.$$(this.element).hide(),this.values=[],this.updateAccessibilityAttributes()},e.prototype.setKeyboardActiveValue=function(e){this.resetKeyboardActiveValue(),this.keyboardActiveValue=e,this.activateFocusOnValue(this.keyboardActiveValue),this.updateAccessibilityAttributes()},e.prototype.resetKeyboardActiveValue=function(){this.keyboardActiveValue&&(this.deactivateFocusOnValue(this.keyboardActiveValue),this.keyboardActiveValue=null)},e.prototype.activateFocusOnValue=function(e){var t=e.element;o.$$(t).addClass("coveo-focused"),t.setAttribute("aria-selected","true")},e.prototype.deactivateFocusOnValue=function(e){var t=e.element;o.$$(t).removeClass("coveo-focused"),t.setAttribute("aria-selected","false")},e.prototype.selectActiveValue=function(){this.keyboardActiveValue&&(this.combobox.options.onSelectValue(this.keyboardActiveValue),this.combobox.clearAll())},e.prototype.onScroll=function(){this.element.scrollTop+this.element.clientHeight>=this.element.scrollHeight&&this.combobox.options.scrollable.areMoreValuesAvailable()&&this.combobox.onScrollEndReached()},e.prototype.resetScroll=function(){this.isScrollable&&(this.element.style.maxHeight=this.combobox.options.scrollable.maxDropdownHeight+"px",this.element.scrollTop=0)},e.prototype.focusFirstValue=function(){this.hasValues()&&this.firstValue.element.focus()},e.prototype.focusLastValue=function(){this.hasValues()&&this.lastValue.element.focus()},e.prototype.focusNextValue=function(){if(this.hasValues()){this.nextOrFirstValue.element.focus()}},e.prototype.focusPreviousValue=function(){if(this.hasValues()){this.previousOrLastValue.element.focus()}},Object.defineProperty(e.prototype,"nextOrFirstValue",{get:function(){if(!this.keyboardActiveValue)return this.firstValue;var e=(this.values.indexOf(this.keyboardActiveValue)+1)%this.numberOfValues;return this.values[e]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstValue",{get:function(){return this.values[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previousOrLastValue",{get:function(){if(!this.keyboardActiveValue)return this.lastValue;var e=this.values.indexOf(this.keyboardActiveValue)-1;return e>=0?this.values[e]:this.values[this.numberOfValues-1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastValue",{get:function(){var e=this.numberOfValues-1;return this.values[e]},enumerable:!0,configurable:!0}),e.prototype.saveFocusedValue=function(){if(!this.keyboardActiveValue)return void(this.focusedValueId=null);this.focusedValueId=this.keyboardActiveValue.element.id},e.prototype.restoreFocusedValue=function(){if(this.focusedValueId){o.$$(this.element).find("#"+this.focusedValueId).focus(),this.focusedValueId=null}},e}();t.ComboboxValues=a},565:function(e,t){},574:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=n(210),s=n(136),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.init=function(e,n,o){i.ResponsiveFacetColumn.init(t,e,n,o,s.DynamicFacet.ID)},t}(i.ResponsiveFacetColumn);t.ResponsiveDynamicFacets=r},575:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(504);var o=n(1),i=n(6),s=n(12),r=n(10),a=n(0),l=function(){function e(e){this.facet=e,this.create()}return e.prototype.create=function(){this.element=o.$$("ul",{className:"coveo-dynamic-facet-breadcrumb coveo-breadcrumb-item"}).el,this.createAndAppendTitle();var e=this.facet.values.activeValues,t=e.slice(0,this.facet.options.numberOfValuesInBreadcrumb),n=e.slice(this.facet.options.numberOfValuesInBreadcrumb);this.createAndAppendBreadcrumbValues(t),n.length&&this.createAndAppendCollapsedBreadcrumbs(n)},e.prototype.createAndAppendTitle=function(){var e=o.$$("h3",{className:"coveo-dynamic-facet-breadcrumb-title"},this.facet.options.title+":").el;this.element.appendChild(e)},e.prototype.createAndAppendBreadcrumbValues=function(e){var t=this;e.forEach(function(e){return t.createAndAppendBreadcrumbValue(e)})},e.prototype.createAndAppendBreadcrumbValue=function(e){var t=this,n=o.$$("li",{className:"coveo-dynamic-facet-breadcrumb-value-list-item"}).el,r=o.$$("button",{className:"coveo-dynamic-facet-breadcrumb-value",ariaLabel:i.l("RemoveFilterOn",e.displayValue)},a.escape(e.displayValue)).el,l=o.$$("span",{className:"coveo-dynamic-facet-breadcrumb-value-clear"},s.SVGIcons.icons.mainClear).el;r.appendChild(l),o.$$(r).on("click",function(){return t.valueSelectAction(e)}),n.appendChild(r),this.element.appendChild(n)},e.prototype.valueSelectAction=function(e){var t=this;this.facet.deselectValue(e.value),this.facet.enablePreventAutoSelectionFlag(),this.facet.triggerNewQuery(function(){return t.logActionToAnalytics()})},e.prototype.logActionToAnalytics=function(){this.facet.logAnalyticsEvent(r.analyticsActionCauseList.breadcrumbFacet,this.facet.basicAnalyticsFacetMeta)},e.prototype.createAndAppendCollapsedBreadcrumbs=function(e){var t=this,n=i.l("NMore",""+e.length),s=e.map(function(e){return e.value}).join("\n"),r=o.$$("button",{className:"coveo-dynamic-facet-breadcrumb-collapse",title:s},n).el;o.$$(r).on("click",function(){o.$$(r).remove(),t.createAndAppendBreadcrumbValues(e)}),this.element.appendChild(r)},e}();t.DynamicFacetBreadcrumbs=l},576:function(e,t){},577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(507),i=n(6),s=n(578),r=n(221),a=n(68),l=n(579);n(508);var u=n(39),c=function(){function e(e){var t=this;this.facet=e,this.facetSearchController=new s.FacetSearchController(this.facet),this.combobox=new o.Combobox({label:i.l("SearchFacetResults",this.facet.options.title),ariaLive:this.facet.searchInterface.ariaLive,requestValues:function(e){return t.facetSearchController.search(e)},createValuesFromResponse:function(e){return t.createValuesFromResponse(e)},onSelectValue:this.onSelectValue,placeholderText:i.l("Search"),wrapperClassName:"coveo-dynamic-facet-search",clearOnBlur:!0,scrollable:{requestMoreValues:function(){return t.facetSearchController.fetchMoreResults()},areMoreValuesAvailable:function(){return t.facetSearchController.moreValuesAvailable},maxDropdownHeight:250},highlightValueClassName:"coveo-checkbox-span-label"}),this.element=this.combobox.element}return e.prototype.getDisplayValue=function(e){return u.FacetUtils.getDisplayValueFromValueCaption(e,this.facet.options.field,this.facet.options.valueCaption)},e.prototype.createValuesFromResponse=function(e){var t=this;return e.values.map(function(e,n){var o=new r.DynamicFacetValue({value:e.rawValue,displayValue:t.getDisplayValue(e.displayValue),numberOfResults:e.count,state:a.FacetValueState.idle,position:n+1},t.facet,l.DynamicFacetSearchValueRenderer);return{value:o,element:o.renderedElement}})},e.prototype.onSelectValue=function(e){e.value.renderer.selectAction()},e}();t.DynamicFacetSearch=c},578:function(e,t,n){"use strict";var o=this&&this.__assign||Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,a)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0});var r=n(113),a=n(23),l=n(32),u=function(){function e(e){this.facet=e,this.terms="",this.pageCount=1,this.numberOfValuesMultiplier=3,this.moreValuesAvailable=!0}return e.prototype.getMonthsValueCaptions=function(){for(var e={},t=1;t<=12;t++){e[("0"+t).substr(-2)]=l.DateUtils.monthToString(t-1)}return e},e.prototype.addTypesCaptionsIfNecessary=function(){var e=this.facet.options.field.toLowerCase(),t=a.QueryUtils.isStratusAgnosticField(e,"@filetype"),n=a.QueryUtils.isStratusAgnosticField(e,"@objecttype"),o=a.QueryUtils.isStratusAgnosticField(e,"@month");return t||n?r.FileTypes.getFileTypeCaptions():o?this.getMonthsValueCaptions():{}},Object.defineProperty(e.prototype,"captions",{get:function(){return o({},this.addTypesCaptionsIfNecessary(),this.facet.options.valueCaption)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberOfValues",{get:function(){return this.facet.options.numberOfValues*this.numberOfValuesMultiplier*this.pageCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"request",{get:function(){var e=this.facet.options.useLeadingWildcardInFacetSearch?"*":"";return{field:this.facet.fieldName,numberOfValues:this.numberOfValues,ignoreValues:this.facet.values.activeValues.map(function(e){return e.value}),captions:this.captions,searchContext:this.facet.queryController.getLastQuery(),query:""+e+this.terms+"*"}},enumerable:!0,configurable:!0}),e.prototype.triggerRequest=function(){return i(this,void 0,void 0,function(){var e;return s(this,function(t){switch(t.label){case 0:return[4,this.facet.queryController.getEndpoint().facetSearch(this.request)];case 1:return e=t.sent(),this.moreValuesAvailable=e.moreValuesAvailable,[2,e]}})})},e.prototype.search=function(e){return this.terms=e,this.pageCount=1,this.triggerRequest()},e.prototype.fetchMoreResults=function(){return this.pageCount++,this.triggerRequest()},e}();t.FacetSearchController=u},579:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(509),s=function(){function e(e,t){this.facetValue=e,this.facet=t}return e.prototype.render=function(){return this.dom=o.$$("div",{className:"coveo-dynamic-facet-value",dataValue:this.facetValue.value}),this.renderCheckbox(),this.dom.el},e.prototype.renderCheckbox=function(){this.valueCheckbox=new i.DynamicFacetValueCheckbox(this.facetValue),o.$$(this.valueCheckbox.element).find("button").setAttribute("tabindex","-1"),this.dom.append(this.valueCheckbox.element)},e.prototype.selectAction=function(){var e=this;this.facet.enableFreezeFacetOrderFlag(),this.facet.toggleSelectValue(this.facetValue.value),this.facet.scrollToTop(),this.facet.triggerNewQuery(function(){return e.facetValue.logSelectActionToAnalytics()})},e}();t.DynamicFacetSearchValueRenderer=s},580:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(39),i=n(221),s=n(68),r=n(512),a=function(){function e(e){this.facet=e}return e.prototype.getDisplayValue=function(e){return o.FacetUtils.getDisplayValueFromValueCaption(e,this.facet.options.field,this.facet.options.valueCaption)},e.prototype.getDefaultValues=function(){return[]},e.prototype.createFromResponse=function(e,t){return new i.DynamicFacetValue({value:e.value,displayValue:this.getDisplayValue(e.value),numberOfResults:e.numberOfResults,state:e.state,position:t+1},this.facet,r.DynamicFacetValueRenderer)},e.prototype.createFromValue=function(e){var t=this.facet.values.allFacetValues.length+1,n=s.FacetValueState.idle,o=this.getDisplayValue(e);return new i.DynamicFacetValue({value:e,displayValue:o,state:n,numberOfResults:0,position:t},this.facet,r.DynamicFacetValueRenderer)},e}();t.DynamicFacetValueCreator=a},68:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e.idle="idle",e.selected="selected"}(t.FacetValueState||(t.FacetValueState={}))},82:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(8);t.ResponsiveFacetOptions={enableResponsiveMode:o.ComponentOptions.buildBooleanOption({defaultValue:!0,section:"ResponsiveOptions"}),responsiveBreakpoint:o.ComponentOptions.buildNumberOption({deprecated:"This option is exposed for legacy reasons. It is not recommended to use this option. Instead, use `SearchInterface.options.responsiveMediumBreakpoint` options exposed on the `SearchInterface`."}),dropdownHeaderLabel:o.ComponentOptions.buildLocalizedStringOption({section:"ResponsiveOptions"})}},87:function(e,t,n){"use strict";var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,s){function r(e){try{l(o.next(e))}catch(e){s(e)}}function a(e){try{l(o.throw(e))}catch(e){s(e)}}function l(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,a)}l((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){function n(e){return function(t){return o([e,t])}}function o(n){if(i)throw new TypeError("Generator is already executing.");for(;l;)try{if(i=1,s&&(r=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(r=r.call(s,n[1])).done)return r;switch(s=0,r&&(n=[0,r.value]),n[0]){case 0:case 1:r=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(r=l.trys,!(r=r.length>0&&r[r.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!r||n[1]>r[0]&&n[1]<r[3])){l.label=n[1];break}if(6===n[0]&&l.label<r[1]){l.label=r[1],r=n;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(n);break}r[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(e){n=[6,e],s=0}finally{i=r=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,s,r,a,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a};Object.defineProperty(t,"__esModule",{value:!0}),n(521),n(522),n(523);var r=n(0),a=n(11),l=n(128),u=n(29),c=n(3),p=n(5),h=n(31),d=n(18),f=n(13),m=n(24),y=n(1),g=n(91),b=n(4),v=n(10),C=n(7),O=n(8),F=n(2),S=n(175),R=n(61),A=n(524),w=n(465),T=n(462),V=n(116),E=n(461),D=n(65),I=n(90),$=n(525),x=n(526),_=n(209),M=n(527),L=n(111),P=n(463);w.CoreHelpers.exportAllHelpersGlobally(window.Coveo);var H=function(e){function t(n,o,i,s){void 0===s&&(s=t.ID);var r=e.call(this,n,s,i)||this;return r.element=n,r.options=o,r.bindings=i,r.currentlyDisplayedResults=[],r.reachedTheEndOfResults=!1,r.disableLayoutChange=!1,r.successiveScrollCount=0,r.options=O.ComponentOptions.initComponentOptions(n,t,o),p.Assert.exists(n),p.Assert.exists(r.options),p.Assert.exists(r.options.resultTemplate),p.Assert.exists(r.options.infiniteScrollContainer),r.showOrHideElementsDependingOnState(!1,!1),r.bind.onRootElement(a.QueryEvents.newQuery,function(e){return r.handleNewQuery()}),r.bind.onRootElement(a.QueryEvents.buildingQuery,function(e){return r.handleBuildingQuery(e)}),r.bind.onRootElement(a.QueryEvents.querySuccess,function(e){return r.handleQuerySuccess(e)}),r.bind.onRootElement(a.QueryEvents.duringQuery,function(e){return r.handleDuringQuery()}),r.bind.onRootElement(a.QueryEvents.queryError,function(e){return r.handleQueryError()}),y.$$(r.root).on(u.ResultListEvents.changeLayout,function(e,t){return r.handleChangeLayout(t)}),r.options.enableInfiniteScroll&&(r.handlePageChanged(),r.bind.on(r.options.infiniteScrollContainer,"scroll",function(e){r.successiveScrollCount=0,r.handleScrollOfResultList()})),r.bind.onQueryState(d.MODEL_EVENTS.CHANGE_ONE,f.QUERY_STATE_ATTRIBUTES.FIRST,function(){return r.handlePageChanged()}),r.resultContainer=r.initResultContainer(),p.Assert.exists(r.options.resultsContainer),r.initWaitAnimationContainer(),p.Assert.exists(r.options.waitAnimationContainer),r.setupTemplatesVersusLayouts(),y.$$(r.root).on(l.ResultLayoutEvents.populateResultLayout,function(e,t){return t.layouts.push(r.options.layout)}),r.setupRenderer(),r.makeElementFocusable(),r.ensureHasId(),r}return o(t,e),t.getDefaultTemplate=function(e){var n=t.loadTemplatesFromCache();if(null!=n)return n;var o=C.Component.get(e);return Coveo.Recommendation&&o.searchInterface instanceof Coveo.Recommendation?new T.DefaultRecommendationTemplate:new V.DefaultResultTemplate},t.loadTemplatesFromCache=function(){var e=D.TemplateCache.getResultListTemplateNames();return e.length>0?new I.TemplateList(r.compact(r.map(e,function(e){return D.TemplateCache.getTemplate(e)}))):null},t.prototype.getAutoSelectedFieldsToInclude=function(){return r.chain(this.options.resultTemplate.getFields()).concat(this.getMinimalFieldsToInclude()).compact().unique().value()},t.prototype.setupTemplatesVersusLayouts=function(){var e=this,t="coveo-"+this.options.layout+"-layout-container";this.resultContainer.addClass(t),"table"===this.options.layout&&(this.options.resultTemplate=new E.TableTemplate(this.options.resultTemplate.templates||[])),this.options.resultTemplate instanceof I.TemplateList?r.each(this.options.resultTemplate.templates,function(t){t.layout||(t.layout=e.options.layout)}):this.options.resultTemplate instanceof V.DefaultResultTemplate&&"list"==this.options.layout&&A.ResponsiveDefaultResultTemplate.init(this.root,this,{})},t.prototype.renderResults=function(e,t){var n=this;return void 0===t&&(t=!1),t||this.resultContainer.empty(),this.renderer.renderResults(e,t,this.triggerNewResultDisplayed.bind(this)).then(function(){return n.triggerNewResultsDisplayed()})},t.prototype.buildResults=function(e){var t=this.options.layout;return this.templateToHtml.buildResults(e,t,this.currentlyDisplayedResults)},t.prototype.buildResult=function(e){var t=this.options.layout;return this.templateToHtml.buildResult(e,t,this.currentlyDisplayedResults)},t.prototype.displayMoreResults=function(e){return p.Assert.isLargerOrEqualsThan(1,e),this.isCurrentlyFetchingMoreResults()?void this.logger.warn("Ignoring request to display more results since we're already doing so"):this.hasPotentiallyMoreResultsToDisplay()?(this.options.enableInfiniteScrollWaitingAnimation&&this.showWaitingAnimationForInfiniteScrolling(),this.fetchAndRenderMoreResults(e)):void this.logger.warn("Ignoring request to display more results since we know there aren't more to display")},Object.defineProperty(t.prototype,"templateToHtml",{get:function(){var e={resultTemplate:this.options.resultTemplate,searchInterface:this.searchInterface,queryStateModel:this.queryStateModel};return new P.TemplateToHtml(e)},enumerable:!0,configurable:!0}),t.prototype.getDisplayedResults=function(){return this.currentlyDisplayedResults},t.prototype.getDisplayedResultsElements=function(){return this.resultContainer.getResultElements()},t.prototype.enable=function(){var t=this;e.prototype.enable.call(this),this.disableLayoutChange=!1,r.each(this.resultLayoutSelectors,function(e){e.enableLayouts([t.options.layout])}),y.$$(this.element).removeClass("coveo-hidden")},t.prototype.disable=function(){var t=this;e.prototype.disable.call(this);var n=r.map(this.otherResultLists,function(e){return e.options.layout});r.contains(n,this.options.layout)||this.disableLayoutChange||r.each(this.resultLayoutSelectors,function(e){e.disableLayouts([t.options.layout])}),this.disableLayoutChange=!1,y.$$(this.element).addClass("coveo-hidden")},t.prototype.autoCreateComponentsInsideResult=function(e,t){return this.templateToHtml.autoCreateComponentsInsideResult(e,t)},t.prototype.triggerNewResultDisplayed=function(e,t){var n={result:e,item:t};y.$$(this.element).trigger(u.ResultListEvents.newResultDisplayed,n)},t.prototype.triggerNewResultsDisplayed=function(){var e={isInfiniteScrollEnabled:this.options.enableInfiniteScroll};y.$$(this.element).trigger(u.ResultListEvents.newResultsDisplayed,e)},t.prototype.fetchAndRenderMoreResults=function(e){return i(this,void 0,void 0,function(){var t,n;return s(this,function(o){switch(o.label){case 0:this.fetchingMoreResults=this.queryController.fetchMore(e),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.fetchingMoreResults];case 2:return t=o.sent(),p.Assert.exists(t),this.usageAnalytics.logCustomEvent(v.analyticsActionCauseList.pagerScrolling,{},this.element),this.reachedTheEndOfResults=e>t.results.length,this.renderNewResults(t),this.resetStateAfterFetchingMoreResults(),[2,t];case 3:return n=o.sent(),this.resetStateAfterFetchingMoreResults(),[2,Promise.reject(n)];case 4:return[2]}})})},t.prototype.renderNewResults=function(e){return i(this,void 0,void 0,function(){var t,n;return s(this,function(o){switch(o.label){case 0:return[4,this.buildResults(e)];case 1:return t=o.sent(),this.renderResults(t,!0),(n=this.currentlyDisplayedResults).push.apply(n,e.results),this.triggerNewResultsDisplayed(),[2]}})})},t.prototype.resetStateAfterFetchingMoreResults=function(){var e=this;this.hideWaitingAnimationForInfiniteScrolling(),this.fetchingMoreResults=void 0,h.Defer.defer(function(){e.successiveScrollCount++,e.successiveScrollCount<=t.MAX_AMOUNT_OF_SUCESSIVE_REQUESTS?e.handleScrollOfResultList():e.logger.info("Result list has triggered 5 consecutive queries to try and fill up the scrolling container, but it is still unable to do so.\n          Try explicitly setting the 'data-infinite-scroll-container-selector' option on the result list. See: https://coveo.github.io/search-ui/components/resultlist.html#options.infinitescrollcontainer")})},t.prototype.handleDuringQuery=function(){this.logger.trace("Emptying the result container"),this.cancelFetchingMoreResultsIfNeeded(),this.showWaitingAnimation(),this.showOrHideElementsDependingOnState(!1,!1)},t.prototype.handleQueryError=function(){this.hideWaitingAnimation(),this.resultContainer.empty(),this.currentlyDisplayedResults=[],this.reachedTheEndOfResults=!0},t.prototype.handleQuerySuccess=function(e){var n=this;p.Assert.exists(e),p.Assert.exists(e.results);var o=e.results;this.logger.trace("Received query results from new query",o),this.hideWaitingAnimation(),t.resultCurrentlyBeingRendered=void 0,this.reachedTheEndOfResults=e.query.numberOfResults>e.results.results.length,this.currentlyDisplayedResults=[],this.buildResults(e.results).then(function(t){return i(n,void 0,void 0,function(){return s(this,function(n){switch(n.label){case 0:return[4,this.renderResults(t)];case 1:return n.sent(),this.showOrHideElementsDependingOnState(!0,0!=this.currentlyDisplayedResults.length),m.DeviceUtils.isMobileDevice()&&void 0!=this.options.mobileScrollContainer&&(this.options.mobileScrollContainer.scrollTop=0),this.options.enableInfiniteScroll&&o.results.length==e.queryBuilder.numberOfResults&&(this.scrollToTopIfEnabled(),this.handleScrollOfResultList()),[2]}})})})},t.prototype.handleScrollOfResultList=function(){!this.isCurrentlyFetchingMoreResults()&&this.options.enableInfiniteScroll&&this.isScrollingOfResultListAlmostAtTheBottom()&&this.hasPotentiallyMoreResultsToDisplay()&&this.displayMoreResults(this.options.infiniteScrollPageSize)},t.prototype.handlePageChanged=function(){var e=this;this.bind.onRootElement(a.QueryEvents.deferredQuerySuccess,function(){setTimeout(function(){e.scrollToTopIfEnabled()},0)})},t.prototype.scrollToTopIfEnabled=function(){this.options.enableScrollToTop&&L.ResultListUtils.scrollToTop(this.root)},t.prototype.handleNewQuery=function(){y.$$(this.element).removeClass("coveo-hidden"),t.resultCurrentlyBeingRendered=void 0},Object.defineProperty(t.prototype,"otherResultLists",{get:function(){var e=this.searchInterface.getComponents(t.ID);return r.without(e,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resultLayoutSelectors",{get:function(){return this.searchInterface.getComponents("ResultLayoutSelector")},enumerable:!0,configurable:!0}),t.prototype.handleBuildingQuery=function(e){if(null!=this.options.fieldsToInclude&&e.queryBuilder.addFieldsToInclude(r.map(this.options.fieldsToInclude,function(e){return e.substr(1)})),this.options.autoSelectFieldsToInclude){var t=r.flatten(r.map(this.otherResultLists,function(e){return e.getAutoSelectedFieldsToInclude()}));e.queryBuilder.addRequiredFields(r.unique(t.concat(this.getAutoSelectedFieldsToInclude()))),e.queryBuilder.includeRequiredFields=!0}},t.prototype.handleChangeLayout=function(e){var t=this;e.layout===this.options.layout?(this.disableLayoutChange=!1,this.enable(),this.options.resultTemplate.layout=this.options.layout,e.results&&(this.resultContainer.isEmpty()&&new S.InitializationPlaceholder(this.root).withVisibleRootElement().withPlaceholderForResultList(),h.Defer.defer(function(){return i(t,void 0,void 0,function(){var t;return s(this,function(n){switch(n.label){case 0:return[4,this.buildResults(e.results)];case 1:return t=n.sent(),this.renderResults(t),this.showOrHideElementsDependingOnState(!0,0!==this.currentlyDisplayedResults.length),[2]}})})}))):(this.disableLayoutChange=!0,this.disable(),this.resultContainer.empty())},t.prototype.isCurrentlyFetchingMoreResults=function(){return b.Utils.exists(this.fetchingMoreResults)},t.prototype.getMinimalFieldsToInclude=function(){return["author","language","urihash","objecttype","collection","source","language","permanentid"]},t.prototype.isScrollingOfResultListAlmostAtTheBottom=function(){var e;try{e=this.options.infiniteScrollContainer instanceof Window}catch(t){e=!1}return e?this.isScrollAtBottomForWindowElement():this.isScrollAtBottomForHtmlElement()},t.prototype.isScrollAtBottomForWindowElement=function(){var e=new y.Win(window),t=e.height(),n=e.scrollY();return new y.Doc(document).height()-(t+n)<t/2},t.prototype.isScrollAtBottomForHtmlElement=function(){var e=this.options.infiniteScrollContainer,t=e.clientHeight;return e.scrollHeight-(e.scrollTop+t)<t/2},t.prototype.hasPotentiallyMoreResultsToDisplay=function(){return this.currentlyDisplayedResults.length>0&&!this.reachedTheEndOfResults},t.prototype.cancelFetchingMoreResultsIfNeeded=function(){this.isCurrentlyFetchingMoreResults()&&(this.logger.trace("Cancelling fetching more results"),Promise.reject(this.fetchingMoreResults),this.fetchingMoreResults=void 0)},t.prototype.showOrHideElementsDependingOnState=function(e,t){var n=y.$$(this.element).findAll(".coveo-show-if-query"),o=y.$$(this.element).findAll(".coveo-show-if-no-query"),i=y.$$(this.element).findAll(".coveo-show-if-results"),s=y.$$(this.element).findAll(".coveo-show-if-no-results");r.each(n,function(t){y.$$(t).toggle(e)}),r.each(o,function(t){y.$$(t).toggle(!e)}),r.each(i,function(n){y.$$(n).toggle(e&&t)}),r.each(s,function(n){y.$$(n).toggle(e&&!t)})},Object.defineProperty(t.prototype,"waitAnimation",{get:function(){return this.options.waitAnimation.toLowerCase()},enumerable:!0,configurable:!0}),t.prototype.showWaitingAnimation=function(){switch(this.waitAnimation){case"fade":y.$$(this.options.waitAnimationContainer).addClass("coveo-fade-out");break;case"spinner":this.resultContainer.hideChildren(),void 0==y.$$(this.options.waitAnimationContainer).find(".coveo-wait-animation")&&this.options.waitAnimationContainer.appendChild(g.DomUtils.getBasicLoadingAnimation())}},t.prototype.hideWaitingAnimation=function(){switch(this.waitAnimation){case"fade":y.$$(this.options.waitAnimationContainer).removeClass("coveo-fade-out");break;case"spinner":var e=y.$$(this.options.waitAnimationContainer).find(".coveo-loading-spinner");e&&y.$$(e).detach()}},t.prototype.showWaitingAnimationForInfiniteScrolling=function(){var e=g.DomUtils.getLoadingSpinner();if("card"==this.options.layout&&this.options.enableInfiniteScroll){var t=y.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner-container");r.each(t,function(e){return y.$$(e).remove()});var n=y.$$("div",{className:"coveo-loading-spinner-container"});n.append(e),this.options.waitAnimationContainer.appendChild(n.el)}else this.options.waitAnimationContainer.appendChild(g.DomUtils.getLoadingSpinner())},t.prototype.hideWaitingAnimationForInfiniteScrolling=function(){var e=y.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner"),t=y.$$(this.options.waitAnimationContainer).findAll(".coveo-loading-spinner-container");r.each(e,function(e){return y.$$(e).remove()}),r.each(t,function(e){return y.$$(e).remove()})},t.prototype.initResultContainer=function(){if(!this.options.resultsContainer){var e="table"===this.options.layout?"table":"div";this.options.resultsContainer=y.$$(e,{className:"coveo-result-list-container"}).el,this.initResultContainerAddToDom()}return new $.ResultContainer(this.options.resultsContainer,this.searchInterface)},t.prototype.initResultContainerAddToDom=function(){this.element.appendChild(this.options.resultsContainer)},t.prototype.initWaitAnimationContainer=function(){this.options.waitAnimationContainer||(this.options.waitAnimationContainer=this.resultContainer.el)},t.prototype.setupRenderer=function(){var e={options:this.searchInterface.options.originalOptionsObject,bindings:this.bindings},t=function(t){return F.Initialization.automaticallyCreateComponentsInside(t,e)};switch(this.options.layout){case"card":this.renderer=new x.ResultListCardRenderer(this.options,t);break;case"table":this.renderer=new M.ResultListTableRenderer(this.options,t);break;case"list":default:this.renderer=new _.ResultListRenderer(this.options,t)}},t.prototype.makeElementFocusable=function(){y.$$(this.element).setAttribute("tabindex","-1")},t.prototype.ensureHasId=function(){""===this.element.id&&(this.element.id=r.uniqueId("coveo-result-list"))},t.ID="ResultList",t.doExport=function(){c.exportGlobally({ResultList:t})},t.options={resultsContainer:O.ComponentOptions.buildChildHtmlElementOption({alias:"resultContainerSelector"}),resultTemplate:R.TemplateComponentOptions.buildTemplateOption({defaultFunction:t.getDefaultTemplate}),waitAnimation:O.ComponentOptions.buildStringOption({defaultValue:"none"}),waitAnimationContainer:O.ComponentOptions.buildChildHtmlElementOption({postProcessing:function(e,t){return e||t.resultsContainer}}),enableInfiniteScroll:O.ComponentOptions.buildBooleanOption({defaultValue:!1}),infiniteScrollPageSize:O.ComponentOptions.buildNumberOption({defaultValue:10,min:1,depend:"enableInfiniteScroll"}),infiniteScrollContainer:O.ComponentOptions.buildChildHtmlElementOption({depend:"enableInfiniteScroll",defaultFunction:function(e){return O.ComponentOptions.findParentScrolling(e)}}),enableInfiniteScrollWaitingAnimation:O.ComponentOptions.buildBooleanOption({depend:"enableInfiniteScroll",defaultValue:!0}),mobileScrollContainer:O.ComponentOptions.buildSelectorOption({defaultFunction:function(){return document.querySelector(".coveo-results-column")}}),autoSelectFieldsToInclude:O.ComponentOptions.buildBooleanOption({defaultValue:!1}),fieldsToInclude:O.ComponentOptions.buildFieldsOption({includeInResults:!0}),layout:O.ComponentOptions.buildStringOption({defaultValue:"list",required:!0}),enableScrollToTop:O.ComponentOptions.buildBooleanOption({defaultValue:!0,depend:"enableInfiniteScroll"})},t.resultCurrentlyBeingRendered=null,t.MAX_AMOUNT_OF_SUCESSIVE_REQUESTS=5,t}(C.Component);t.ResultList=H,F.Initialization.registerAutoCreateComponent(H)}});